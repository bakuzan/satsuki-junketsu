(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";var r={localUserSettings:"satsukiUserSettings",localGameState:"satsukiSavedGame",colours:{white:"white",black:"black",whiteHex:"#ffffff",blackHex:"#000000"},pieces:{pawn:"pawn",rook:"rook",knight:"knight",bishop:"bishop",queen:"queen",king:"king"},specialMoves:{promotionSelection:"PROMOTION_SELECT",promotion:"PROMOTION_COMPLETE",enPassant:"EN_PASSANT",castling:"CASTLING"},castling:{kingTargets:["c","g"],rookStarts:["a","h"],rookEnds:["d","f"]},pgn:{piece:{king:"K",queen:"Q",bishop:"B",knight:"N",rook:"R",pawn:""},capture:"x",promotion:"=",castle:{king:"O-O",queen:"O-O-O"},enPassant:"e.p.",check:"+",checkmate:"#"}};t.a=r},150:function(e,t,n){e.exports=n(404)},157:function(e,t,n){e.exports=n(403)},16:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return p}),n.d(t,"e",function(){return m}),n.d(t,"d",function(){return v});var r=n(2),a=n(1),c=n(25),i=n(7),o=function(e){return Object(r.a)({},e,{hasMoved:!0})},s=function(e){return{id:e.id,rank:e.rank,file:e.file}},u=function(e,t,n,r,a){return{from:s(e),to:s(t),piece:o(t.contains),isAmbiguous:Object(c.a)(e,t,n,r),checkStatus:Object(c.c)(t.contains,n),captured:r,specialMove:a}},l=function(e,t,n){var r=e.findIndex(function(e){return e.id===n.id});return Object(i.n)(Object(i.n)(e,t,{contains:n.contains}),r,{contains:null})},f=function(e,t,n){return Object(i.n)(e,t,{contains:n?Object(r.a)({},e[t].contains||{},n):null})},d=function(e){return function(t){return{type:e,squareId:t}}},p=d(a.a.specialMoves.promotionSelection),m=d(a.a.specialMoves.enPassant),v=d(a.a.specialMoves.castling)},173:function(e,t,n){},175:function(e,t,n){},177:function(e,t,n){},179:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t),n.d(t,"BOARD_SELECT_SQUARE",function(){return r}),n.d(t,"selectBoardSquare",function(){return a}),n.d(t,"BOARD_MOVE_PIECE",function(){return c}),n.d(t,"moveSelectedPiece",function(){return i}),n.d(t,"BOARD_TAKE_PIECE",function(){return o}),n.d(t,"takePiece",function(){return s}),n.d(t,"BOARD_SPECIAL_MOVE",function(){return u}),n.d(t,"performSpecialMove",function(){return l}),n.d(t,"BOARD_RESET",function(){return f}),n.d(t,"resetBoard",function(){return d}),n.d(t,"BOARD_IMPORT_GAME",function(){return p}),n.d(t,"importGame",function(){return m}),n.d(t,"BOARD_SAVE_GAME",function(){return v}),n.d(t,"saveGame",function(){return b}),n.d(t,"BOARD_LOAD_GAME",function(){return h}),n.d(t,"loadGame",function(){return g}),n.d(t,"BOARD_TOGGLE_REVERSE",function(){return O}),n.d(t,"toggleReverseBoard",function(){return k}),n.d(t,"BOARD_COMPUTER_MOVE",function(){return j}),n.d(t,"performComputerMove",function(){return y});var r="BOARD_SELECT_SQUARE",a=function(e){return{type:r,squareId:e}},c="BOARD_MOVE_PIECE",i=function(e){return{type:c,targetSquareId:e}},o="BOARD_TAKE_PIECE",s=function(e){return{type:o,targetSquareId:e}},u="BOARD_SPECIAL_MOVE",l=function(e){return{type:u,specialMove:e}},f="BOARD_RESET",d=function(e){return{type:f,option:e}},p="BOARD_IMPORT_GAME",m=function(e){return{type:p,fileText:e}},v="BOARD_SAVE_GAME",b=function(){return{type:v}},h="BOARD_LOAD_GAME",g=function(){return{type:h}},O="BOARD_TOGGLE_REVERSE",k=function(){return{type:O}},j="BOARD_COMPUTER_MOVE",y=function(e){return{type:j,move:e}}},181:function(e,t,n){},183:function(e,t,n){},187:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"e",function(){return c}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l});var r=n(4),a=n(32),c=function(e){return 0===e||e%2===0},i=function(e){return c(e.length)?r.a.Strings.colours.white:r.a.Strings.colours.black},o=function(e){return e.contains.colour===r.a.Strings.colours.white?r.a.Strings.colours.black:r.a.Strings.colours.white},s=function(e,t,n,c){for(var i=!(n.files||n.ranks),o=function(o,s){var u=c[o];if(null===u.contains)return"continue";if(Object(a.d)(e,u))return"continue";var l=r.a.files.findIndex(function(e){return e===u.file});if(i){if(Object(a.c)(l,e,t,u))return{v:!1}}else if(n.files&&u.file===t.file){if(Object(a.b)(e.rank,t.rank,u.rank))return{v:!1}}else if(n.ranks&&u.rank===t.rank){var f=r.a.files.findIndex(function(t){return t===e.file}),d=r.a.files.findIndex(function(e){return e===t.file});if(Object(a.b)(f,d,l))return{v:!1}}},s=0,u=c.length;s<u;s++){var l=o(s);switch(l){case"continue":continue;default:if("object"===typeof l)return l.v}}return!0},u=function(e,t,n){var a=e.contains,c={files:e.file===t.file,ranks:e.rank===t.rank},i=r.a.files.findIndex(function(t){return t===e.file}),o=r.a.files.findIndex(function(e){return e===t.file}),u=Math.abs(o-i),l=Math.abs(t.rank-e.rank);switch(a.name){case r.a.Strings.pieces.pawn:if(!c.files)return!1;if(a.colour===r.a.Strings.colours.white){if(2===e.rank&&3===t.rank)return!0;if(2===e.rank&&4===t.rank)return s(e,t,c,n);if(1===l&&e.rank<t.rank)return!0}else if(a.colour===r.a.Strings.colours.black){if(7===e.rank&&6===t.rank)return!0;if(7===e.rank&&5===t.rank)return s(e,t,c,n);if(1===l&&e.rank>t.rank)return!0}return!1;case r.a.Strings.pieces.rook:return!(!c.files&&!c.ranks)&&s(e,t,c,n);case r.a.Strings.pieces.knight:return!c.files&&!c.ranks&&(1===l&&2===u||2===l&&1===u);case r.a.Strings.pieces.bishop:return u===l&&s(e,t,c,n);case r.a.Strings.pieces.queen:return c.files||c.ranks?s(e,t,c,n):u===l&&s(e,t,c,n);case r.a.Strings.pieces.king:return!(!c.ranks||1!==u)||(!(!c.files||1!==l)||1===l&&1===u);default:return!1}},l=function(e,t,n){var a=e.contains,c=n.find(function(e){return e.file===t.file&&e.rank===t.rank});if(!c||!c.contains)return!1;if(c.contains.colour===a.colour)return!1;switch(a.name){case r.a.Strings.pieces.pawn:var i=r.a.files.findIndex(function(t){return t===e.file}),o=r.a.files.findIndex(function(e){return e===t.file});return 1===Math.abs(o-i)&&1===Math.abs(t.rank-e.rank)&&(e.rank<t.rank&&a.colour===r.a.Strings.colours.white||e.rank>t.rank&&a.colour===r.a.Strings.colours.black);case r.a.Strings.pieces.rook:case r.a.Strings.pieces.knight:case r.a.Strings.pieces.bishop:case r.a.Strings.pieces.queen:case r.a.Strings.pieces.king:return u(e,t,n);default:return!1}}},23:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l});var r=n(6),a=n(2),c=n(1),i=n(16);function o(e,t,n,c){var o=e.squares.find(function(e){return e.id===t}),s=e.squares.findIndex(function(e){return e.id===n}),u=Object(i.a)(o.contains),l=e.squares[s].contains?Object(a.a)({},e.squares[s].contains):null,f=Object(i.c)(e.squares,s,Object(a.a)({},o,{contains:u})),d=Object(r.a)(e.moves).concat([Object(i.g)(o,f[s],f,l,c)]),p=l?Object(r.a)(e.graveyard).concat([l]).filter(function(e){return!!e}):e.graveyard;return Object(a.a)({},e,{selectedSquareId:null,squares:f,moves:d,graveyard:p})}function s(e,t){var n=e.find(function(e){return e.id===t}),r=c.a.castling.kingTargets.findIndex(function(e){return e===n.file}),o=e.find(function(e){return e.rank===n.rank&&e.file===c.a.castling.rookStarts[r]}),s=e.findIndex(function(e){return e.rank===n.rank&&e.file===c.a.castling.rookEnds[r]}),u=Object(i.a)(o.contains);return Object(i.c)(e,s,Object(a.a)({},o,{contains:u}))}function u(e,t){var n=e.squares.find(function(e){return e.id===t}),o=n.contains.colour===c.a.colours.white?1:-1,s=n.rank-o,u=e.squares.findIndex(function(e){return e.file===n.file&&e.rank===s}),l=Object(a.a)({},e.squares[u].contains),f=Object(i.b)(e.squares,u,null),d=e.moves.length-1,p=Object(r.a)(e.moves.slice(0,d)).concat([Object(a.a)({},e.moves[d],{captured:Object(a.a)({},l)})]);return Object(a.a)({},e,{squares:f,moves:p,graveyard:Object(r.a)(e.graveyard).concat([l])})}function l(e,t){return u({moves:[],graveyard:[],squares:e},t).squares}},24:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return s});var r="PLAYBACK_UPDATE_SLIDE_POSITION",a=function(e,t){return{type:r,sliderValue:t}},c="PLAYBACK_STEP_FORWARD",i=function(e,t){return{type:c,stepDirection:t}},o="PLAYBACK_STEP_BACK",s=function(e,t){return{type:o,stepDirection:t}}},25:function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return v});var r=n(2),a=n(6),c=n(4),i=n(16),o=n(19),s=function(e,t){var n=e.contains.colour,r=t.find(l(n));return!!f(r,t).length},u=function(e){var t=e.selectedSquareId,n=e.squares;if(null===t)return[];var r=n.find(function(e){return e.id===t});return n.reduce(function(e,t,c){return(t.contains?o.d:o.c)(r,t,n)&&!s(r,Object(i.c)(n,c,r))?Object(a.a)(e).concat([t.id]):e},[])},l=function(e){return function(t){return t.contains&&t.contains.name===c.a.Strings.pieces.king&&t.contains.colour===e}},f=function(e,t){return t.filter(function(t){return e&&t.contains&&t.contains.colour!==e.contains.colour}).reduce(function(n,r){return Object(o.d)(r,e,t)?Object(a.a)(n).concat([r]):n},[])},d=function(e,t){var n=t.find(l(e)),r=f(n,t);return{kingSquare:n,attackers:r,isCheckmate:!!r.length&&!function(e,t){return t.filter(function(t){return t.contains&&t.contains.colour===e}).some(function(e){return!!u({selectedSquareId:e.id,squares:t}).length})}(e,t)}},p=function(e,t){var n=e.colour===c.a.Strings.colours.white?c.a.Strings.colours.black:c.a.Strings.colours.white,r=d(n,t),a=r.attackers,i=r.isCheckmate;return{isCheck:!!a.length,isCheckmate:i}},m=[c.a.Strings.pieces.king,c.a.Strings.pieces.queen,c.a.Strings.pieces.bishop],v=function(e,t,n,a){var c=t.contains;if(m.includes(c.name))return!1;var s=n.filter(function(e){return e.id!==t.id&&e.contains&&e.contains.name===c.name&&e.contains.colour===c.colour});if(0===s.length)return!1;var u=n.findIndex(function(t){return t.id===e.id}),l=n.findIndex(function(e){return e.id===t.id}),f=Object(i.b)(n,u,Object(r.a)({},t.contains));f=Object(i.b)(f,l,a);var d=a?o.d:o.c;return s.some(function(e){return d(e,t,f)})}},32:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return f});var r=n(31),a=n(4),c=a.a.Strings,i=c.pieces,o=c.colours,s=function(){var e=a.a.files.slice(0),t=-1;return Array(64).fill(null).map(function(n,a){var c=8-Math.floor(a/8),s=(a+c)%8;s===t&&(e.push(e.shift()),t=-1);var u=e[s];return t=s,{id:a,rank:c,file:u,contains:function(e,t){if(-1===[1,2,7,8].indexOf(e))return null;var n="",a="",c=e<5?o.white:o.black;if([2,7].indexOf(e)>-1){var s=[i.pawn,"p"];n=s[0],a=s[1]}else if(["a","h"].indexOf(t)>-1){var u=[i.rook,"r"];n=u[0],a=u[1]}else if(["b","g"].indexOf(t)>-1){var l=[i.knight,"n"];n=l[0],a=l[1]}else if(["c","f"].indexOf(t)>-1){var f=[i.bishop,"b"];n=f[0],a=f[1]}else{var d="d"===t?[i.queen,"q"]:[i.king,"k"],p=Object(r.a)(d,2);n=p[0],a=p[1]}return{id:"".concat(c.slice(0,1),"-").concat(a,"-").concat(t),name:n,colour:c,hasMoved:!1}}(c,u)}})},u=function(e,t){return e.rank===t.rank&&e.file===t.file},l=function(e,t,n){return e<n&&n<t||e>n&&n>t},f=function(e,t,n,r){var c=a.a.files.findIndex(function(e){return e===t.file});if(Math.abs(e-c)!==Math.abs(r.rank-t.rank))return!1;if(!l(t.rank,n.rank,r.rank))return!1;var i=a.a.files.findIndex(function(e){return e===n.file});return!!l(c,i,e)}},36:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"f",function(){return s});var r=/\n/g,a=/\d\. /g,c=/\d\/\d-\d\/\d$|\d\/\d$|\{.*\}/g,i=/.*=/,o=/.*(?=[a-h]\d)/g,s=/[a-h]x[a-h]|[a-h]{2}/},375:function(e,t,n){},377:function(e,t,n){},379:function(e,t,n){},38:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={base:"/satsuki-junketsu"}},381:function(e,t,n){},383:function(e,t,n){},385:function(e,t,n){},387:function(e,t,n){},389:function(e,t,n){},39:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(15),a=n(2),c=Object.freeze([{id:1,text:"vs Computer (You as White)"},{id:2,text:"vs Computer (You as Black)"},{id:3,text:"vs Player"}]);t.b=c;var i=Object.freeze(c.reduce(function(e,t){var n=t.text.replace(/\(|\)| |as/g,"");return Object(a.a)({},e,Object(r.a)({},n,t.id))},{}))},391:function(e,t,n){},393:function(e,t,n){},395:function(e,t,n){},397:function(e,t,n){},399:function(e,t,n){},4:function(e,t,n){"use strict";var r=n(2),a=n(38),c=n(1),i=n(48),o=Object(r.a)({Paths:a.a,Strings:c.a,themes:[{name:"Junketsu",class:"theme-one"},{name:"Senketsu",class:"theme-two"}],boardThemes:[{name:"Standard",class:"board-one"},{name:"Desert",class:"board-two"},{name:"Forest",class:"board-three"}]},i);t.a=o},401:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"white",function(){return kt}),n.d(r,"black",function(){return jt});var a={};n.r(a),n.d(a,"white",function(){return Et}),n.d(a,"black",function(){return Ct});var c={};n.r(c),n.d(c,"white",function(){return wt}),n.d(c,"black",function(){return Mt});var i={};n.r(i),n.d(i,"white",function(){return At}),n.d(i,"black",function(){return xt});var o={};n.r(o),n.d(o,"white",function(){return qt}),n.d(o,"black",function(){return It});var s={};n.r(s),n.d(s,"white",function(){return Bt}),n.d(s,"black",function(){return Tt});var u=n(0),l=n.n(u),f=n(28),d=n.n(f),p=n(21),m=n(83),v=n.n(m),b=n(150),h=n.n(b),g=n(33),O=n(46),k=n(9),j=n(10),y=n(14),E=n(12),C=n(13),S=n(8),w=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).el=document.createElement(e.parentTag),n.getTargetNode=function(){return document.querySelector(e.targetSelector)},n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.getTargetNode().appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var e=this.getTargetNode();e&&e.removeChild(this.el)}},{key:"render",value:function(){return d.a.createPortal(this.props.children,this.el)}}]),t}(l.a.Component);w.defaultProps={parentTag:"div"};var M=w,L=function(e){var t=e.name,n=e.value,r=e.disabled,a=e.onSelect,c=e.text,i=e.options;return l.a.createElement("div",{className:"has-float-label select-container"},l.a.createElement("select",{className:"select-box",name:t,value:n,onChange:function(e){return a(e)},disabled:r},i.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.text)})),l.a.createElement("label",null,c))};L.defaultProps={disabled:!1};var A=L,x=(n(173),function(e){var t=e.name,n=e.checked,r=e.disabled,a=e.onChange,c=e.text;return l.a.createElement("div",{className:"input-container"},l.a.createElement("label",{className:"tickbox"},l.a.createElement("input",{type:"checkbox",name:t,checked:n,disabled:r,onChange:a}),c))}),D=n(47),q=n(18),I=n(4),P=(n(175),function(e){return{text:e.name,value:e.class}}),B=I.a.themes.map(P),T=I.a.boardThemes.map(P),N=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={isDropdownOpen:!1},n.handleDropdownChange=n.handleDropdownChange.bind(Object(S.a)(Object(S.a)(n))),n.handleCloseAppSettings=n.handleCloseAppSettings.bind(Object(S.a)(Object(S.a)(n))),n.toggleDropdown=n.toggleDropdown.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"handleDropdownChange",value:function(e){var t=this;return function(n){e(n.target.value),t.handleCloseAppSettings()}}},{key:"handleCloseAppSettings",value:function(){this.setState({isDropdownOpen:!1})}},{key:"toggleDropdown",value:function(){this.setState(function(e){return{isDropdownOpen:!e.isDropdownOpen}})}},{key:"render",value:function(){var e,t=this.props,n=t.appTheme,r=t.boardTheme,a=t.setApplicationTheme,c=t.setBoardTheme,i=t.reverseBoard,o=t.toggleReverseBoard;return e=n,document.body.className=e,l.a.createElement("div",{id:"app-settings"},l.a.createElement("input",{type:"checkbox",value:this.state.isDropdownOpen,id:"app-settings-toggler",onChange:this.toggleDropdown}),l.a.createElement("label",{icon:"\u2699",htmlFor:"app-settings-toggler",title:"App settings"}),this.state.isDropdownOpen&&l.a.createElement(M,{targetSelector:"main"},l.a.createElement("div",{id:"app-settings-backdrop",role:"button",onClick:this.handleCloseAppSettings}),l.a.createElement("ul",{id:"app-settings-menu",className:"dropdown-menu",role:"menu"},l.a.createElement("li",{className:"dropdown-arrow"}),l.a.createElement("li",null,l.a.createElement(A,{name:"appTheme",text:"App Theme",value:n,options:B,onSelect:this.handleDropdownChange(a)})),l.a.createElement("li",null,l.a.createElement(A,{name:"boardTheme",text:"Board Theme",value:r,options:T,onSelect:this.handleDropdownChange(c)})),l.a.createElement("li",null,l.a.createElement(x,{name:"reverseBoard",text:"Flip board on move",checked:i,onChange:o})))))}}]),t}(l.a.Component),R={setApplicationTheme:D.c,setBoardTheme:D.d,toggleReverseBoard:q.toggleReverseBoard},_=Object(p.b)(function(e){return{appTheme:e.theme.app,boardTheme:e.theme.board,reverseBoard:e.board.reverseBoard}},R)(N),z=(n(177),function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(y.a)(this,Object(E.a)(t).call(this))).letterClass="letter",e.animate="hideshow",e.sideLength=50,e}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.findDOMNode)(this);this.characters=e.querySelectorAll("text.letter"),this.cycleCharacters()}},{key:"cycleCharacters",value:function(){var e=this;clearInterval(this.interval),this.interval=setInterval(function(){var t=Array.from(e.characters).findIndex(function(t){return t.getAttribute("class").indexOf(e.animate)>-1}),n=t+1<e.characters.length?t+1:0;-1!==t&&e.characters[t].setAttribute("class",e.letterClass),e.characters[n].setAttribute("class","".concat(e.letterClass," ").concat(e.animate))},3e3)}},{key:"renderLetters",value:function(e){return e.toUpperCase().split("").map(function(e,t){return l.a.createElement("text",{key:t,className:"letter",x:"50%",y:"50%",dy:"0.3em"},e)})}},{key:"render",value:function(){var e=this.renderLetters(this.props.text);return l.a.createElement("div",{className:"svg-logo"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},e,l.a.createElement("text",{className:"word diagonal",x:"50%",y:"50%",dy:"0.3em",textLength:this.sideLength,lengthAdjust:"spacingAndGlyphs"},this.props.text.toUpperCase())))}}]),t}(u.Component)),G=n(38),U=(n(179),function(e){function t(){return Object(k.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return l.a.createElement("nav",{className:"satsuki-header center-contents"},l.a.createElement(g.a,{className:"ripple",id:"satsuki-svg",to:G.a.base},l.a.createElement(z,{text:"Satsuki Junketsu"})),l.a.createElement("h1",null,"SATSUKI JUNKETSU"),l.a.createElement("div",{id:"navigation-links"},l.a.createElement("div",{className:"flex-right center-vertically"},l.a.createElement(_,null))))}}]),t}(u.Component)),W=n(6),H=n(20),V=n.n(H),K=n(52),F=(n(181),function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(y.a)(this,Object(E.a)(t).call(this))).state={stack:Array(0)},e.timer=null,K.a.register(Object(S.a)(Object(S.a)(e))),e}return Object(C.a)(t,e),Object(j.a)(t,[{key:"removeColdToast",value:function(){return this.state.stack.filter(function(e){return e.time>Date.now()-3e3})}},{key:"removeToast",value:function(e){var t=this.removeColdToast().filter(function(t){return t.time!==e});this.setState({stack:t})}},{key:"eatToast",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){return e.removeToast()},3e3)}},{key:"popToast",value:function(e){this.setState({stack:Object(W.a)(this.state.stack).concat([e])}),this.eatToast()}},{key:"render",value:function(){var e=this,t=this.state.stack||Array(0);return l.a.createElement("div",{className:V()("toaster")},t.map(function(t){var n=function(){return e.removeToast(t.time)};return l.a.createElement("span",{key:t.time,role:"button",tabIndex:"0",className:V()("toast",t.type.toLowerCase()),onClick:n,onKeyDown:n},l.a.createElement("span",{className:V()("toast__title")},t.title),l.a.createElement("span",{className:V()("toast__message")},t.message))}))}}]),t}(l.a.Component)),J=(n(183),function(e){return(e||"").trim()}),Q=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={hovered:!1},n.handleHovered=n.handleHovered.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"handleHovered",value:function(e){var t=this;return function(){return t.setState({hovered:e})}}},{key:"render",value:function(){var e=J("master "),t=J("1.0.0");return l.a.createElement("div",{className:V()("app-information"),onMouseEnter:this.handleHovered(!0),onMouseLeave:this.handleHovered(!1),"aria-label":"Branch ".concat(e,", version ").concat(t)},l.a.createElement("div",{className:V()("app-information__detail",{"app-information__detail--visible":this.state.hovered})},"Branch: ",e,l.a.createElement("br",null),"Version: ",t))}}]),t}(l.a.PureComponent),Y=l.a.memo(function(e){var t=e.children;return l.a.createElement("div",{className:"satsuki"},l.a.createElement(U,null),l.a.createElement("main",null,t),l.a.createElement(F,null),l.a.createElement(Q,null))}),$=n(50),X=n.n($),Z=n(89),ee=n(22),te=n(2),ne=n(31),re=n(30),ae=(n(187),function(e){function t(){return Object(k.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"renderScale",value:function(e){return e.map(function(e){return l.a.createElement("div",{key:e},e)})}},{key:"render",value:function(){var e=this.renderScale(this.props.files),t=this.renderScale(this.props.ranks);return l.a.createElement("span",{className:"scales"},l.a.createElement("span",{className:"scale file top"},e),l.a.createElement("span",{className:"scale file bottom"},e),l.a.createElement("span",{className:"scale rank left"},t),l.a.createElement("span",{className:"scale rank right"},t))}}]),t}(u.Component)),ce=n(15),ie=n(44),oe=n(156),se=n.n(oe),ue=Object.freeze({piece:"piece",square:"square"}),le={canDrop:function(e,t){return e.dropActions.canDrop(e.id,t.getItem())},drop:function(e,t){return e.dropActions.onDrop(e.id,t.getItem())}};function fe(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}function de(e){return e.onDrag&&e.onDrag(e),e}var pe={beginDrag:de,endDrag:de};function me(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}var ve=Object(ie.DragDropContext)(se.a),be=function(e){var t=function(t){function n(){return Object(k.a)(this,n),Object(y.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(C.a)(n,t),Object(j.a)(n,[{key:"render",value:function(){var t=this.props,n=t.connectDropTarget,r=Object(re.a)(t,["connectDropTarget"]);return l.a.createElement(e,Object.assign({},r,{ref:function(e){return n(Object(f.findDOMNode)(e))}}))}}]),n}(l.a.Component);return Object(ie.DropTarget)(ue.piece,le,fe)(t)},he=function(e){var t=function(t){function n(){return Object(k.a)(this,n),Object(y.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(C.a)(n,t),Object(j.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props,n=t.connectDragSource,r=(t.connectDragPreview,Object(re.a)(t,["connectDragSource","connectDragPreview"]));return l.a.createElement(e,Object.assign({},r,{ref:function(e){return n(Object(f.findDOMNode)(e))}}))}}]),n}(l.a.Component);return Object(ie.DragSource)(ue.piece,pe,me)(t)},ge=n(1),Oe="-2 0 50 50",ke="100%",je=function(e){return e===ge.a.colours.white?ge.a.colours.whiteHex:ge.a.colours.blackHex};function ye(e){return function(t){function n(){return Object(k.a)(this,n),Object(y.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(C.a)(n,t),Object(j.a)(n,[{key:"render",value:function(){var t=function(e,t){var n=t===ge.a.colours.white,r=n?ge.a.colours.black:ge.a.colours.white,a=je(t),c=je(r);switch(e){case ge.a.pieces.bishop:return{outline:{fill:a},detail:{stroke:c}};case ge.a.pieces.king:return{topCap:{fill:a},mainBody:{fill:a},lines:{stroke:c}};case ge.a.pieces.knight:return{face:{fill:c,stroke:c},mane:{fill:c},mainBody:{fill:a}};case ge.a.pieces.pawn:return{fill:a};case ge.a.pieces.queen:return{isWhite:n,mainBody:{fill:a}};case ge.a.pieces.rook:return{fill:a};default:return{}}}(e.displayName,this.props.colour);return l.a.createElement(e,{size:ke,viewBox:Oe,styleSettings:t})}}]),n}(l.a.Component)}var Ee={opacity:1,fill:"none",fillRule:"evenodd",fillOpacity:1,stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Ce={fill:"#000000",stroke:"#000000",strokeLinecap:"butt"},Se={fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"},we=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings,a=Object(te.a)({},Ce,r.outline),c=Object(te.a)({},Se,r.detail);return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:Ee},l.a.createElement("g",{style:a},l.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),l.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),l.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),l.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:c})))};we.displayName=ge.a.pieces.bishop;var Me=ye(we),Le={fill:"none",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Ae={fill:"none",stroke:"#000000",strokeLinejoin:"miter"},xe={fill:"#000000",fillOpacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"},De={fill:"#000000",stroke:"#000000"},qe={fill:"none",stroke:"#000000",strokeLinejoin:"miter"},Ie={fill:"none",stroke:"#ffffff"},Pe=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings,a=Object(te.a)({},xe,r.topCap),c=Object(te.a)({},De,r.mainBody),i=Object(te.a)({},Ie,r.lines);return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:Le},l.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:Ae,id:"path6570"}),l.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:a}),l.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:c}),l.a.createElement("path",{d:"M 20,8 L 25,8",style:qe}),l.a.createElement("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85",style:i}),l.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37",style:i})))};Pe.displayName=ge.a.pieces.king;var Be=ye(Pe),Te={opacity:1,fill:"none",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Ne={fill:"#000000",stroke:"#000000"},Re={fill:"#ffffff",stroke:"#ffffff"},_e={fill:"#ffffff",stroke:"none"},ze=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings,a=Object(te.a)({},_e,r.mane),c=Object(te.a)({},Re,r.face),i=Object(te.a)({},Ne,r.mainBody);return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:Te},l.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:i}),l.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:i}),l.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:c}),l.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:c}),l.a.createElement("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:a})))};ze.displayName=ge.a.pieces.knight;var Ge=ye(ze),Ue={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"nonzero",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},We=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings;return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:Object(te.a)({},Ue,r)}))};We.displayName=ge.a.pieces.pawn;var He=ye(We),Ve={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Ke={fill:"#000000",stroke:"none"},Fe={strokeLinecap:"butt",stroke:"#000000"},Je={strokeLinecap:"butt"},Qe={fill:"none",stroke:"#000000",strokeLinecap:"butt"},Ye={fill:"none",stroke:"#ffffff"},$e={fill:"none"},Xe=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings;return r.isWhite?l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:Object(te.a)({},Ve,r.mainBody)},l.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(-1,-1)"}),l.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(15.5,-5.5)"}),l.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(32,-1)"}),l.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(7,-4.5)"}),l.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(24,-4)"}),l.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z ",style:Je}),l.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z ",style:Je}),l.a.createElement("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:$e}),l.a.createElement("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:$e}))):l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:Ve},l.a.createElement("g",{style:Ke},l.a.createElement("circle",{cx:"6",cy:"12",r:"2.75"}),l.a.createElement("circle",{cx:"14",cy:"9",r:"2.75"}),l.a.createElement("circle",{cx:"22.5",cy:"8",r:"2.75"}),l.a.createElement("circle",{cx:"31",cy:"9",r:"2.75"}),l.a.createElement("circle",{cx:"39",cy:"12",r:"2.75"})),l.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:Fe}),l.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z",style:Je}),l.a.createElement("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:Qe}),l.a.createElement("path",{d:"M 11,29 A 35,35 1 0 1 34,29",style:Ye}),l.a.createElement("path",{d:"M 12.5,31.5 L 32.5,31.5",style:Ye}),l.a.createElement("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5",style:Ye}),l.a.createElement("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5",style:Ye})))};Xe.displayName=ge.a.pieces.queen;var Ze=ye(Xe),et={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},tt={strokeLinecap:"butt"},nt={strokeLinecap:"butt",strokeLinejoin:"miter"},rt={fill:"none",stroke:"#ffffff",strokeWidth:1,strokeLinejoin:"miter"},at=function(e){var t=e.size,n=e.viewBox,r=e.styleSettings,a=Object(te.a)({},et,r);return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:n,width:t,height:t},l.a.createElement("g",{style:a},l.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:tt}),l.a.createElement("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:tt}),l.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:tt}),l.a.createElement("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:nt}),l.a.createElement("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:tt}),l.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:tt}),l.a.createElement("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:rt}),l.a.createElement("path",{d:"M 13,31.5 L 32,31.5",style:rt}),l.a.createElement("path",{d:"M 14,29.5 L 31,29.5",style:rt}),l.a.createElement("path",{d:"M 14,16.5 L 31,16.5",style:rt}),l.a.createElement("path",{d:"M 11,14 L 34,14",style:rt})))};at.displayName=ge.a.pieces.rook;var ct={Bishop:Me,King:Be,Knight:Ge,Pawn:He,Queen:Ze,Rook:ye(at)},it=n(7),ot=(n(375),he(function(e){function t(){return Object(k.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.isDragging!==this.props.isDragging,n=!Object(it.i)(e,this.props);return t||n}},{key:"renderCoolChessPieceSvg",value:function(e,t){switch(e){case ge.a.pieces.bishop:return l.a.createElement(ct.Bishop,{colour:t});case ge.a.pieces.king:return l.a.createElement(ct.King,{colour:t});case ge.a.pieces.knight:return l.a.createElement(ct.Knight,{colour:t});case ge.a.pieces.pawn:return l.a.createElement(ct.Pawn,{colour:t});case ge.a.pieces.queen:return l.a.createElement(ct.Queen,{colour:t});case ge.a.pieces.rook:return l.a.createElement(ct.Rook,{colour:t});default:return null}}},{key:"render",value:function(){var e,t=this.props,n=t.name,r=t.colour,a=t.isDragging;return l.a.createElement("div",{className:V()("piece",(e={},Object(ce.a)(e,"".concat(r,"-").concat(n),!0),Object(ce.a)(e,"piece--dragging",a),e))},this.renderCoolChessPieceSvg(n,r))}}]),t}(l.a.Component))),st=(n(377),be(function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).handleDragPiece=n.handleDragPiece.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"handleDragPiece",value:function(e){this.props.onClick&&this.props.onClick(this.props.id)}},{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.rank,a=t.file,c=t.isSelected,i=t.isPotentialMove,o=t.isSpecialMove,s=t.isInCheck,u=t.contains,f=t.onClick,d=V()("square",(e={selected:c,"potential-move":i&&!u,"potential-take":i&&u,"special-move":o,"in-check":s,"is-over":this.props.isOver,"can-drop":this.props.canDrop},Object(ce.a)(e,"rank-".concat(r),!0),Object(ce.a)(e,"file-".concat(a),!0),e));return l.a.createElement("div",{id:n,className:d,onClick:function(){return f(n)}},!!u&&l.a.createElement(ot,Object.assign({},u,{onDrag:this.handleDragPiece})))}}]),t}(l.a.Component))),ut=(n(379),[ge.a.pieces.rook,ge.a.pieces.knight,ge.a.pieces.bishop,ge.a.pieces.queen]),lt=Object(p.b)(function(e){return{promotionAt:e.board.promotionAt}},function(e){return{actions:Object(ee.b)({performSpecialMove:q.performSpecialMove},e)}})(function(e){var t=e.promotionAt,n=e.actions;if(!t)return null;var r=Object(te.a)({},t,{type:ge.a.specialMoves.promotion});return l.a.createElement("div",{id:"promotion-options-container"},l.a.createElement("div",null,"Please select a piece to promote to: "),l.a.createElement("ul",{className:"list column"},ut.map(function(e){return l.a.createElement("li",{key:e,id:"promote-to-".concat(e)},l.a.createElement("button",{type:"button",className:"button",onClick:function(){return n.performSpecialMove(Object(te.a)({},r,{promoteTo:e}))}},e))})))}),ft=n(19),dt=(n(381),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).handleSquareSelection=n.handleSquareSelection.bind(Object(S.a)(Object(S.a)(n))),n.handleCanDrop=n.handleCanDrop.bind(Object(S.a)(Object(S.a)(n))),n.handleDrop=n.handleDrop.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"handleSquareSelection",value:function(e){var t=this.props,n=t.squares,r=t.potentialMoves,a=t.specialMoves,c=t.selectedSquareId,i=t.actions,o=n.find(function(e){return e.id===c}),s=n.find(function(t){return t.id===e}),u=c===e,l=this.props.currentPlayerColour,f=r.some(function(t){return t===e}),d=a.find(function(t){return t.squareId===e}),p=!!d;if(o||s.contains){if(o&&!s.contains)return p?i.performSpecialMove(d):f?i.moveSelectedPiece(e):console.log("%c invalid move","color: red; font-size: 22px;",o,s);if(o||s.contains.colour===l)return o||s.contains.colour!==l?o&&u?i.selectBoardSquare(null):o&&s.contains.colour===l?i.selectBoardSquare(e):o&&s.contains.colour!==l?p?i.performSpecialMove(d):f?i.takePiece(e):console.log("%c invalid take","color: red; font-size: 22px;",o,s):void console.log("%c square selection case not handled!","color: red","Selected square: ".concat(c,", Target square: ").concat(e)):i.selectBoardSquare(e)}}},{key:"handleCanDrop",value:function(e){var t=this.props,n=t.potentialMoves,r=t.specialMoves,a=n.some(function(t){return t===e}),c=r.find(function(t){return t.squareId===e});return a||!!c}},{key:"handleDrop",value:function(e){this.handleSquareSelection(e)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.themeClass,r=e.squares,a=e.selectedSquareId,c=e.currentPlayerColour,i=e.potentialMoves,o=e.specialMoves,s=e.checkStatus,u=e.isReversed,f=e.isReadOnly,d=e.nextMove,p=u?Object(it.l)(r):r,m=u?Object(it.l)(I.a.files):I.a.files,v=u?Object(it.l)(I.a.ranks):I.a.ranks,b=!!s.attackers.length&&s.kingSquare.id,h=!!b,g=f||s.isCheckmate,O=g?function(){return null}:this.handleSquareSelection,k={canDrop:this.handleCanDrop,onDrop:this.handleDrop};return console.groupCollapsed("BOARD RENDER"),console.log("selectedSquareId",a),console.log("boardSquares",p),console.log("props",this.props),console.log("isLocked",g),console.groupEnd(),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:t,className:V()("chess-board",n,{"read-only":g})},l.a.createElement(ae,{files:m,ranks:v}),p.map(function(e){var t=i.some(function(t){return t===e.id});t=t&&(!f||f&&d.to.id===e.id);var n=o.some(function(t){return t.squareId===e.id});return n=n&&(!f||f&&d.to.id===e.id),l.a.createElement(st,Object.assign({key:e.id},e,{isPotentialMove:t,isSpecialMove:n,isInCheck:e.id===b,isSelected:e.id===a,onClick:O,dropActions:k}))})),l.a.createElement(M,{targetSelector:"#chess-game-status"},!s.isCheckmate&&l.a.createElement(l.a.Fragment,null,l.a.createElement(lt,null),"".concat(Object(it.a)(c),"'s turn"),h&&"\n".concat(Object(it.a)(c)," is in Check!")),s.isCheckmate&&"Winner: ".concat(Object(ft.b)(s.kingSquare))))}}]),t}(l.a.Component)),pt=n(25),mt=n(43),vt=n(53),bt=n(23);function ht(e,t,n){var r=Object(te.a)({},e,{selectedSquareId:n,squares:t});return{possibleMoves:Object(pt.d)(r),possibleSMoves:Object(mt.a)(r)}}function gt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.moves,a=e.squares,c=n?r:r.slice(1),i=Object(te.a)({},e,{moves:c}),o=t.reduce(function(e,t){var n=ht(i,a,t.id),r=n.possibleMoves,c=n.possibleSMoves;return Object(W.a)(e).concat(Object(W.a)(r),Object(W.a)(c))},[]);return new Set(o)}var Ot=[0,0,0,0,0,0,0,0,50,50,50,50,50,50,50,50,10,10,20,30,30,20,10,10,5,5,10,25,25,10,5,5,0,0,0,20,20,0,0,0,5,-5,-10,0,0,-10,-5,5,5,10,10,-20,-20,10,10,5,0,0,0,0,0,0,0,0],kt=Object.freeze(Ot),jt=Object(it.m)(Ot),yt=[-50,-40,-30,-30,-30,-30,-40,-50,-40,-20,0,0,0,0,-20,-40,-30,0,10,15,15,10,0,-30,-30,5,15,20,20,15,5,-30,-30,0,15,20,20,15,0,-30,-30,5,10,15,15,10,5,-30,-40,-20,0,5,5,0,-20,-40,-50,-40,-30,-30,-30,-30,-40,-50],Et=Object.freeze(yt),Ct=Object(it.m)(yt),St=[-20,-10,-10,-10,-10,-10,-10,-20,-10,0,0,0,0,0,0,-10,-10,0,5,10,10,5,0,-10,-10,5,5,10,10,5,5,-10,-10,0,10,10,10,10,0,-10,-10,10,10,10,10,10,10,-10,-10,5,0,0,0,0,5,-10,-20,-10,-10,-10,-10,-10,-10,-20],wt=Object.freeze(St),Mt=Object(it.m)(St),Lt=[0,0,0,0,0,0,0,0,5,10,10,10,10,10,10,5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,0,0,0,5,5,0,0,0],At=Object.freeze(Lt),xt=Object(it.m)(Lt),Dt=[-20,-10,-10,-5,-5,-10,-10,-20,-10,0,0,0,0,0,0,-10,-10,0,5,5,5,5,0,-10,-5,0,5,5,5,5,0,-5,0,0,5,5,5,5,0,-5,-10,5,5,5,5,5,0,-10,-10,0,5,0,0,0,0,-10,-20,-10,-10,-5,-5,-10,-10,-20],qt=Object.freeze(Dt),It=Object(it.m)(Dt),Pt=[-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-20,-30,-30,-40,-40,-30,-30,-20,-10,-20,-20,-20,-20,-20,-20,-10,20,20,0,0,0,0,20,20,20,30,10,0,0,10,30,20],Bt=Object.freeze(Pt),Tt=Object(it.m)(Pt),Nt=ge.a.pieces;function Rt(e){var t=e.id,n=e.contains,u=n.name,l=n.colour;return function(e){switch(e){case Nt.pawn:return r;case Nt.knight:return a;case Nt.bishop:return c;case Nt.rook:return i;case Nt.queen:return o;case Nt.king:return s;default:return{}}}(u)[l][t]}var _t=n(48),zt=function(e){return function(t){return t.contains&&t.contains.colour===e&&t.contains.name===ge.a.pieces.pawn}},Gt=function(e){return e.reduce(function(e,t){var n=e.get(t.file)||0;return e.set(t.file,n+1)},new Map([]))},Ut=function(e){return Object(W.a)(e.values()).reduce(function(e,t){return t>1?e+1:e},0)},Wt=function(e){return Object(W.a)(e.keys()).reduce(function(t,n){var r=_t.files.findIndex(function(e){return e===n}),a=_t.files[r-1],c=_t.files[r+1];return!a&&e.has(c)||!c&&e.has(a)||e.has(a)||e.has(c)?t:t+1},0)};var Ht=ge.a.pieces,Vt=function(e,t){return e.filter(function(e){return e.contains.name===t}).length},Kt=function(e,t){return function(n,r){return e*(Vt(n,t)-Vt(r,t))}},Ft=Kt(2e4,Ht.king),Jt=Kt(900,Ht.queen),Qt=Kt(500,Ht.rook),Yt=Kt(330,Ht.bishop),$t=Kt(320,Ht.knight),Xt=Kt(100,Ht.pawn);function Zt(e,t){var n=t.squares,r=e===ge.a.colours.white,a=r?1:-1,c=n.filter(function(e){return e.contains&&e.contains.colour===ge.a.colours.white}),i=n.filter(function(e){return e.contains&&e.contains.colour===ge.a.colours.black}),o=Ft(c,i)+Jt(c,i)+Qt(c,i)+Yt(c,i)+$t(c,i)+Xt(c,i),s=n.filter(function(e){return e.contains}).reduce(function(e,t){return e+Rt(t)},0),u=50*function(e){var t=e.filter(zt(ge.a.colours.white)),n=e.filter(zt(ge.a.colours.black)),r=Gt(t),a=Gt(n);return Ut(r)-Ut(a)+0+(Wt(r)-Wt(a))}(n),l=gt(t,c,r),f=gt(t,i,!r),d=10*(l.size-f.size),p=(o-u+d)*a+s;return console.groupCollapsed("score",p),console.log("couunts",o),console.log("pieceSquare",s),console.log("mobility",l,f,d),console.groupEnd(),p}var en={selectNextMove:function(e){var t=e.moves,n=e.squares,r=Object(ft.a)(t),a=n.filter(function(e){return e.contains&&e.contains.colour===r}),c=a.reduce(function(t,a){var c=a.id,i=ht(e,n,c),o=i.possibleMoves,s=i.possibleSMoves,u=o.reduce(function(t,n){return t.set(n,Zt(r,Object(bt.a)(e,c,n)))},new Map([])),l=s.map(function(e){return e});return Object(W.a)(t).concat([{squareId:c,moveResults:u,specialMoveResults:l}])},[]),i=c.reduce(function(e,t){return Object(it.f)(e,t)}),o=Object(it.e)(i.moveResults),s={fromId:i.squareId,toId:o};return console.groupCollapsed("%c engine in progress","color: magenta"),console.log("input > ",e),console.log("current player > ",r),console.log("pieces > ",a),console.log("moves for pieces > ",c),console.log("best >> ",i),console.log("output > ",s),console.groupEnd(),s}},tn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={computerSelected:null},n.timer=null,n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.board,n=t.vsComputer,r=t.moves,a=n.isComputer,c=n.isComputerBlack,i=Object(ft.e)(r.length);a&&!(c&&i||!c&&!i)&&(clearTimeout(this.timer),this.timer=setTimeout(function(){return e.makeComputerMove()},1e3))}},{key:"makeComputerMove",value:function(){var e=this.props.board,t=e.moves,n=e.squares,r=Object(ft.a)(t),a=Object(pt.b)(r,n);if(!a||!a.isCheckmate){var c=en.selectNextMove(this.props.board);c&&this.props.actions.performComputerMove(c)}}},{key:"render",value:function(){var e=this.props,t=e.board,n=Object(re.a)(e,["board"]),r=t.playback.sliderPosition,a=r!==t.moves.length,c=t.moves.slice(0,r),i=t.moves.slice(r,r+1),o=Object(ne.a)(i,1)[0],s=a?Object(vt.c)(t.moves,r):t.selectedSquareId,u=a?Object(vt.a)(c):t.squares,f=Object(te.a)({},t,{selectedSquareId:s,moves:c,squares:u}),d=Object(ft.a)(c),p=Object(pt.d)(f),m=Object(mt.a)(f),v=Object(pt.b)(d,u),b=t.reverseBoard&&!Object(ft.e)(c.length);return l.a.createElement(dt,Object.assign({},n,f,{currentPlayerColour:d,nextMove:o,potentialMoves:p,specialMoves:m,checkStatus:v,isReversed:b,isReadOnly:a}))}}]),t}(l.a.Component),nn=Object(p.b)(function(e){return{themeClass:e.theme.board,board:e.board}},function(e){return{actions:Object(ee.b)(q,e)}})(ve(tn)),rn=(n(383),function(e){var t=e.pieces;return l.a.createElement("div",{className:"graveyard"},t.map(function(e,t){return l.a.createElement(ot,Object.assign({key:t},e))}))}),an=function(e){var t=e.board.playback.sliderPosition;return e.board.moves.slice(0,t)},cn=function(e,t){var n=an(e);return e.board.graveyard.filter(function(e){return e.colour===t&&n.some(function(t){return t.captured&&t.captured.id===e.id})})},on=Object(p.b)(function(e){return{isReversed:function(e){var t=an(e);return e.board.reverseBoard&&!Object(ft.e)(t.length)}(e),whitePieces:cn(e,I.a.Strings.colours.white),blackPieces:cn(e,I.a.Strings.colours.black)}})(function(e){var t=e.isReversed,n=e.whitePieces,r=e.blackPieces;return l.a.createElement("div",{id:"paired-graveyards"},l.a.createElement(rn,{pieces:t?r:n}),l.a.createElement(rn,{pieces:t?n:r}))}),sn=(n(385),function(e){var t=e.pgn,n=e.isActive,r=e.onClick;return l.a.createElement("li",{className:V()({active:n})},l.a.createElement("button",{type:"button",className:"button",disabled:n,onClick:r},t))}),un=function(e){var t=e.moves,n=e.activeMoveIndex,r=Object(re.a)(e,["moves","activeMoveIndex"]);return l.a.createElement("div",{id:"move-list"},l.a.createElement("ul",{className:"list column two"},l.a.createElement("li",{key:"WHITE",className:"title"},ge.a.colours.white),l.a.createElement("li",{key:"BLACK",className:"title"},ge.a.colours.black),t.map(function(e,t){var a=r.onSelect?function(){return r.onSelect("PLACEHOLDER NAME",t)}:function(){return null};return l.a.createElement(sn,Object.assign({key:e.id,isActive:t===n,onClick:a},e))})))},ln=n(24),fn=n(42),dn={onSelect:ln.f},pn=Object(p.b)(function(e){return{moves:Object(fn.a)(e.board.moves),activeMoveIndex:e.board.playback.sliderPosition}},dn)(un),mn="\u25b6",vn="\u2223\u2223",bn="\u2039",hn="\u203a",gn=n(49),On=(n(387),function(e){return l.a.createElement("button",{type:"button",className:V()("button-icon ripple playback-button",e.className),icon:e.icon,disabled:e.disabled,onClick:e.onClick})}),kn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={isPlaying:!1},n.timer=null,n.previousPosition=null,n.handleTogglePlay=n.handleTogglePlay.bind(Object(S.a)(Object(S.a)(n))),n.createSliderStepHandler=n.createSliderStepHandler.bind(Object(S.a)(Object(S.a)(n))),n.handleSliderChange=n.handleSliderChange.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"handleTogglePlay",value:function(){var e=this;this.setState(function(e){return{isPlaying:!e.isPlaying}},function(){clearInterval(e.timer),e.state.isPlaying&&(e.props.sliderPosition===e.props.sliderMaximum&&e.props.actions.onSlide(e.props.name,gn.a),e.timer=setInterval(function(){if(e.previousPosition===e.props.sliderMaximum)return e.stopPlaying();e.previousPosition=e.props.sliderPosition,e.props.actions.onStepForward(e.props.name,1)},e.props.playbackInterval))})}},{key:"stopPlaying",value:function(){clearInterval(this.timer),this.previousPosition=null,this.setState({isPlaying:!1})}},{key:"createSliderStepHandler",value:function(e){var t=this,n=1===e?this.props.actions.onStepForward:this.props.actions.onStepBack;return function(){return n(t.props.name,e)}}},{key:"handleSliderChange",value:function(e){var t=e.target,n=t.name,r=t.value;this.props.actions.onSlide(n,Number(r))}},{key:"render",value:function(){var e=this.state.isPlaying,t=this.props,n=t.name,r=t.isDisabled,a=t.isHidden,c=t.sliderPosition,i=t.sliderMaximum;if(a)return null;var o=c===gn.a,s=c===i,u=e?vn:mn,f=c/i*100,d={backgroundImage:"linear-gradient(90deg, currentcolor, currentcolor ".concat(f,"%, transparent ").concat(f,"%)")};return l.a.createElement("div",{id:"playback-control"},l.a.createElement("div",{className:"button-group"},l.a.createElement(On,{className:"playback-toggle-play",icon:u,onClick:this.handleTogglePlay,disabled:r})),l.a.createElement("div",{id:"playback-progress-container",className:"range-slider"},l.a.createElement("input",{type:"range",name:n,style:d,value:c,max:i,disabled:r,onChange:this.handleSliderChange})),l.a.createElement("div",{className:"button-group"},l.a.createElement(On,{className:"playback-back",icon:bn,onClick:this.createSliderStepHandler(-1),disabled:o||r}),l.a.createElement(On,{className:"playback-forward",icon:hn,onClick:this.createSliderStepHandler(1),disabled:s||r})))}}]),t}(l.a.Component);kn.defaultProps={name:"slider",sliderMaximum:100,playbackInterval:1e3,isDisabled:!1,isHidden:!1};var jn=kn,yn=Object(p.b)(function(e){return Object(te.a)({},e.board.playback,{isDisabled:e.board.moves.length<2})},function(e){return{actions:Object(ee.b)({onSlide:ln.f,onStepForward:ln.e,onStepBack:ln.d},e)}})(jn),En="525px",Cn={header:50,actions:45,status:52,playback:62},Sn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={width:En,height:En},n.wrappedComponent=l.a.createRef(),n.onResize=n.onResize.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.wrappedComponent.current,n=Math.min(e.clientHeight,e.clientWidth),r=Object.keys(Cn).reduce(function(e,t){return e-Cn[t]},n);t.setState({width:"".concat(r,"px"),height:"".concat(r,"px")})},200)}},{key:"render",value:function(){return this.props.children(this.wrappedComponent,this.state)}}]),t}(l.a.Component);var wn=function(e){var t=e.children,n=Object(re.a)(e,["children"]);return l.a.createElement("button",Object.assign({type:"button",className:"button ripple primary"},n),t)},Mn=n(39),Ln=(n(389),function(e){var t=e.display,n=e.targetSelector,r=e.onSelect;return t?(console.log(Mn.b,Mn.a),l.a.createElement(M,{targetSelector:n},l.a.createElement("div",{className:"game-options"},l.a.createElement("p",null,"Select game type"),l.a.createElement("ul",{className:"list column one"},Mn.b.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(wn,{onClick:function(){return r(e.id)}},e.text))}))))):null}),An=n(88),xn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={isStartingNewGame:!1},n.fileSelector=l.a.createRef(),n.handleImport=n.handleImport.bind(Object(S.a)(Object(S.a)(n))),n.handleNewGame=n.handleNewGame.bind(Object(S.a)(Object(S.a)(n))),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.loadGame()}},{key:"handleImport",value:function(){var e=Object(Z.a)(X.a.mark(function e(t){var n,r;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files&&t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Response(n).text();case 5:r=e.sent,this.props.actions.importGame(r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleNewGame",value:function(e){var t=this;this.state.isStartingNewGame?this.setState({isStartingNewGame:!1},function(){return t.props.actions.resetBoard(e)}):this.setState({isStartingNewGame:!0})}},{key:"render",value:function(){var e=this.props,t=e.moves,n=e.vsComputer,r=e.actions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pn,null),l.a.createElement("div",{id:"chess-game-actions",className:"button-group right"},l.a.createElement(wn,{id:"new-game",onClick:this.handleNewGame},"New Game"),l.a.createElement(wn,{id:"save-game",onClick:r.saveGame},"Save Game"),l.a.createElement(wn,{id:"export-game",onClick:function(){return Object(An.a)(t,n)}},"Export"),l.a.createElement("label",{id:"import-game",role:"button",className:"button ripple primary"},"Import",l.a.createElement("input",{ref:this.fileSelector,type:"file",accept:".pgn",onChange:this.handleImport}))),l.a.createElement("div",{id:"chess-game",ref:this.getGameContainer},l.a.createElement(Sn,null,function(e,t){return l.a.createElement("div",{ref:e,className:"left-column"},l.a.createElement("div",{id:"chess-game-status"}),l.a.createElement(nn,{style:t}),l.a.createElement(yn,null))}),l.a.createElement("div",{className:"right-column"},l.a.createElement(on,null))),l.a.createElement(Ln,{targetSelector:"#".concat("chess-game-actions"),display:this.state.isStartingNewGame,onSelect:this.handleNewGame}))}}]),t}(l.a.Component),Dn=Object(p.b)(function(e){return{moves:e.board.moves,vsComputer:e.board.vsComputer}},function(e){return{actions:Object(ee.b)({resetBoard:q.resetBoard,importGame:q.importGame,saveGame:q.saveGame,loadGame:q.loadGame},e)}})(xn),qn=function(e){var t=e.match;return l.a.createElement(g.d,null,l.a.createElement(g.c,{exact:!0,path:t.path,component:Dn}))},In=function(e){var t=e.history;return l.a.createElement(O.a,{history:t},l.a.createElement(Y,null,l.a.createElement(g.d,null,l.a.createElement(g.b,{exact:!0,from:"/",to:G.a.base}),l.a.createElement(g.c,{path:G.a.base,component:qn}),l.a.createElement(g.c,{path:"*",render:function(){return l.a.createElement("div",null,"Page not found")}}))))},Pn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Bn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Tn=function(e){return(function(e){return document.getElementById(e)}(e)||{click:function(){return console.log("nothing to click")}}).click()},Nn=function(){var e=Object(Z.a)(X.a.mark(function e(t,n){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(t);case 2:return e.next=4,Tn(n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Rn=function e(t){var n,r=t.pop();if(!r)return console.log("board ready");clearTimeout(n),n=setTimeout(function(){!function(e){Nn.apply(void 0,Object(W.a)(e))}(r),e(t)},200)},_n=[[53,37],[12,28],[54,38],[3,39]].reverse(),zn=[[53,45],[12,28],[45,37],[3,39]].reverse(),Gn=[[53,37],[8,16],[54,38],[9,17],[61,47],[10,18],[62,45],[11,19],[60]].reverse(),Un=[[51,35],[8,16],[35,27],[12,28],[27]].reverse(),Wn=[[54,38],[15,31],[38,31],[7,23],[53,45],[23,22],[31,23],[22,21],[23,15],[21,20],[15]].reverse(),Hn=[[50,34],[11,27],[52,36],[8,16],[34,27]].reverse(),Vn={selectSquare:Tn,moveFromSquareToSquare:Nn,makeMoves:Rn,movesFor:{fastestGame:_n,check:zn,castling:Gn,enPassant:Un,promotion:Wn},examples:{fastestGame:function(){return Rn(_n)},check:function(){return Rn(zn)},promotion:function(){return Rn(Wn)},enPassant:function(){return Rn(Un)},castling:function(){return Rn(Gn)},ambiguous:function(){return Rn(Hn)}},actions:{newGame:function(){return document.getElementById("new-game").click()},saveGame:function(){return document.getElementById("save-game").click()},export:function(){return document.getElementById("export-game").click()},import:function(){return document.getElementById("import-game").click()}},playback:{togglePlay:function(){return document.querySelector(".playback-button.playback-toggle-play").click()},forward:function(){return document.querySelector(".playback-button.playback-forward").click()},back:function(){return document.querySelector(".playback-button.playback-back").click()}}};n(391),n(393),n(395),n(397),n(399),n(401);window.Engine=en,window.AutomateBoard=Vn;var Kn=v()(),Fn=h()(Kn);d.a.render(l.a.createElement(p.a,{store:Fn},l.a.createElement(In,{history:Kn})),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/satsuki-junketsu",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/satsuki-junketsu","/service-worker.js");Pn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Bn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Bn(e)})}}()},404:function(e,t,n){"use strict";n.r(t);var r,a=n(22),c=n(46),i=n(15),o=n(2),s=n(47),u=n(4),l=n(7);function f(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}var d=function(e){return function(t,n){return Object(l.k)({theme:Object(o.a)({},t,Object(i.a)({},e,n.theme))}).theme}},p=f(function(){var e=Object(l.h)();return e&&e.theme?e.theme:{app:u.a.themes[0].class,board:u.a.boardThemes[0].class}}(),(r={},Object(i.a)(r,s.a,d("app")),Object(i.a)(r,s.b,d("board")),r)),m=n(32),v=n(23);var b=n(52),h=n(18),g=n(24),O=n(1),k=n(16);var j=function(e,t){var n=t.specialMove,r=n.type,a=n.squareId;if(r===O.a.specialMoves.promotionSelection)return Object(o.a)({},e,{promotionAt:t.specialMove});var c=Object(v.a)(e,e.selectedSquareId,t.specialMove.squareId,t.specialMove);switch(r){case O.a.specialMoves.promotion:var i=c.squares.findIndex(function(e){return e.id===a}),s=Object(k.b)(c.squares,i,{name:t.specialMove.promoteTo});return Object(o.a)({},c,{squares:s,promotionAt:null});case O.a.specialMoves.enPassant:return Object(v.c)(c,a);case O.a.specialMoves.castling:var u=Object(v.b)(c.squares,a);return Object(o.a)({},c,{squares:u});default:return e}},y=n(53),E=0,C=function(e){return{sliderMaximum:e,sliderPosition:e}};function S(e,t){var n=Object(y.b)(e.playback.sliderPosition+t.stepDirection,e.playback.sliderMaximum);return Object(o.a)({},e,{playback:Object(o.a)({},e.playback,{sliderPosition:n})})}var w=function(e,t){switch(t.type){case g.c:var n=t.sliderValue;return Object(o.a)({},e,{playback:Object(o.a)({},e.playback,{sliderPosition:n})});case g.b:case g.a:return S(e,t);default:return Object(o.a)({},e,{playback:C(E)})}},M=n(6),L=n(19),A=n(88),x=n(42),D=n(43);var q,I,P=function(e,t){var n=t.fileText,r=Object(A.b)(n);return r.pgnMoves.map(x.b).reduce(function(e,t){var n=e.squares.findIndex(function(e){return e.file===t.to.file&&e.rank===t.to.rank}),a=Object(o.a)({},e.squares[n]),c=!!a&&!!a.contains,i=c?Object(o.a)({},a.contains):null,s=c?L.d:L.c,u=e.squares.find(function(n){return(!t.from||t.from&&n.file===t.from.file&&(!t.from.rank||n.rank===t.from.rank))&&n.contains&&n.contains.colour===t.piece.colour&&n.contains.name===t.piece.name&&(s(n,a,e.squares)||function(e,t,n){return!!t.specialMove&&Object(D.a)(Object(o.a)({},e,{selectedSquareId:n.id})).some(function(e){return e.type===t.specialMove.type})}(e,t,n))}),l=Object(k.a)(u.contains),f=Object(k.c)(e.squares,n,Object(o.a)({},u,{contains:l})),d=t.specialMove?Object(o.a)({},t.specialMove,{squareId:a.id}):null,p=t.specialMove&&t.specialMove.type===O.a.specialMoves.castling,m=t.specialMove&&t.specialMove.type===O.a.specialMoves.enPassant;f=p?Object(v.b)(f,a.id):f;var b=Object(o.a)({},e,{squares:f,graveyard:Object(M.a)(e.graveyard).concat([i]).filter(function(e){return!!e}),moves:Object(M.a)(e.moves).concat([Object(k.g)(u,f[n],f,i,d)]),vsComputer:r.vsComputer});return m?Object(v.c)(b,a.id):b},e)},B=n(39),T={reverseBoard:!1,graveyard:[],moves:[],squares:Object(m.a)(),selectedSquareId:null,promotionAt:null,playback:C(E),vsComputer:{isComputer:!0,isComputerBlack:!0}},N=function(e,t){return Object(o.a)({},e,{selectedSquareId:t.squareId})},R=function(e){return Object(o.a)({},e,{playback:C(e.moves.length)})},_=Object(l.b)(R,function(e,t){return Object(v.a)(e,e.selectedSquareId,t.targetSquareId)}),z=Object(l.b)(R,j),G=Object(l.b)(R,(I=T,function(e,t){return P(I,t)})),U=f(T,(q={},Object(i.a)(q,h.BOARD_SELECT_SQUARE,N),Object(i.a)(q,h.BOARD_MOVE_PIECE,_),Object(i.a)(q,h.BOARD_TAKE_PIECE,_),Object(i.a)(q,h.BOARD_SPECIAL_MOVE,z),Object(i.a)(q,g.c,w),Object(i.a)(q,g.b,w),Object(i.a)(q,g.a,w),Object(i.a)(q,h.BOARD_IMPORT_GAME,G),Object(i.a)(q,h.BOARD_RESET,function(e,t){var n=t.option;return n===B.a.vsComputerYouBlack?Object(o.a)({},T,{vsComputer:Object(o.a)({},T.vsComputer,{isComputerBlack:!1})}):n===B.a.vsPlayer?Object(o.a)({},T,{vsComputer:Object(o.a)({},T.vsComputer,{isComputer:!1})}):T}),Object(i.a)(q,h.BOARD_SAVE_GAME,function(e){var t=Object(l.j)(e);return b.a.success("Saved Game"),t}),Object(i.a)(q,h.BOARD_LOAD_GAME,function(e){var t=Object(l.g)();return t?(b.a.success("Loaded Game"),function(e){var t=Object(o.a)({},e);return e.hasOwnProperty("vsComputer")||(t=Object(o.a)({},t,{vsComputer:{isComputer:!1,isComputerBlack:!0}})),t}(t)):e}),Object(i.a)(q,h.BOARD_TOGGLE_REVERSE,function(e){return Object(o.a)({},e,{reverseBoard:!e.reverseBoard})}),Object(i.a)(q,h.BOARD_COMPUTER_MOVE,function(e,t){var n=t.move,r=n.fromId,a=n.toId,c=N(e,{squareId:r});return _(c,{targetSquareId:a})}),q)),W=Object(a.c)({routing:c.c,theme:p,board:U});t.default=function(e,t){return Object(a.d)(W,t,Object(a.a)(Object(c.b)(e)))}},42:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return m});var r=n(31),a=n(1),c=n(36),i=n(19),o=n(7),s="g";function u(e){var t=Object(o.d)(),n="";if(e.specialMove&&e.specialMove.type===a.a.specialMoves.castling)return{id:t,pgn:e.to.file===s?a.a.pgn.castle.king:a.a.pgn.castle.queen};n+=a.a.pgn.piece[e.piece.name],e.isAmbiguous&&(n+="".concat(e.from.file)),e.captured&&(n+="".concat(a.a.pgn.capture)),n+="".concat(e.to.file).concat(e.to.rank),e.specialMove&&e.specialMove.type===a.a.specialMoves.promotion&&(n+="".concat(a.a.pgn.promotion).concat(a.a.pgn.piece[e.specialMove.promoteTo]||"")),e.specialMove&&e.specialMove.type===a.a.specialMoves.enPassant&&(n+="".concat(a.a.pgn.enPassant));var r=e.checkStatus,c=r.isCheck,i=r.isCheckmate;return!i&&c&&(n+=a.a.pgn.check),i&&(n+=a.a.pgn.checkmate),{id:t,pgn:n}}var l=function(e){return e.map(u)},f=function(e){return Object.keys(a.a.pgn.piece).find(function(t){return a.a.pgn.piece[t]===e})||a.a.pieces.pawn},d=function(e){return 3===e.length},p=function(e,t){return{file:"e",rank:t?1:8}};function m(e,t){var n=Object(i.e)(t),o=n?a.a.colours.white:a.a.colours.black,s=n?a.a.colours.black:a.a.colours.white,u=function(e){return e===a.a.pgn.castle.king||e===a.a.pgn.castle.queen?{type:a.a.specialMoves.castling}:e.includes(a.a.pgn.promotion)?{type:a.a.specialMoves.promotion,promoteTo:f(e.replace(c.c,""))}:e.includes(a.a.pgn.enPassant)?{type:a.a.specialMoves.enPassant}:null}(e),l=u&&u.type===a.a.specialMoves.castling,m=f(e.slice(0,1)),v=l?{colour:o,name:a.a.pieces.king,hasMoved:!0}:{colour:o,name:m,hasMoved:!0},b=e.replace(c.b,"").split(""),h=Object(r.a)(b,2),g=h[0],O=h[1],k=l?function(e,t){var n=t?1:8;return d(e)?{file:"g",rank:n}:{file:"c",rank:n}}(e,n):{file:g,rank:Number(O)},j=l?p(e,n):function(e){var t=c.f.exec(e);return t?{file:t[0].slice(0,1)}:null}(e);return{from:j,piece:v,to:k,isAmbiguous:!l&&!!j,specialMove:u,captured:e.includes("x")?{colour:s}:null,checkStatus:{isCheck:e.includes("+"),isCheckmate:e.includes("#")}}}},43:function(e,t,n){"use strict";var r=n(6),a=n(31),c=n(4),i=n(16),o=n(25),s=c.a.Strings,u=8,l=7,f=2,d=1;function p(e,t){return Object(r.a)(function(e,t){var n=e.contains.colour===s.colours.white?u:d;return 1!==Math.abs(e.rank-n)?[]:Object(o.d)({selectedSquareId:e.id,squares:t}).map(i.f)}(e,t.squares)).concat(Object(r.a)(function(e,t){var n=t.squares,r=t.moves.slice(-1),o=Object(a.a)(r,1)[0];if(!o)return[];if(o.piece.name!==s.pieces.pawn)return[];var u=o.piece.colour===s.colours.white?f:l,d=e.contains.colour===s.colours.white?-1:1,p=u+2*d;if(o.from.rank!==u||o.to.rank!==e.rank||o.to.rank!==p)return[];var m=c.a.files.findIndex(function(e){return e===o.to.file}),v=c.a.files.findIndex(function(t){return t===e.file});if(1!==Math.abs(m-v))return[];var b=n.find(function(e){return e.file===o.to.file&&e.rank===o.to.rank-d});return[Object(i.e)(b.id)]}(e,t)))}t.a=function(e){var t=e.squares,n=e.selectedSquareId,c=t.find(function(e){return e.id===n});if(!c)return[];switch(c.contains.name){case s.pieces.pawn:return p(c,e);case s.pieces.king:return function(e,t){if(e.contains.hasMoved)return[];if(Object(o.e)(e,t))return[];var n=t.filter(function(t){return t.contains&&t.contains.name===s.pieces.rook&&t.contains.colour===e.contains.colour&&!t.contains.hasMoved});if(!n.length)return[];var c=e.id,u=n.reduce(function(n,s){var u=s.id,l=u<c?[u,c]:[c,u],f=Object(a.a)(l,2),d=f[0],p=f[1],m=Array.from(new Array(p-d-1),function(e,t){return 1+t+d});return t.filter(function(e){return m.includes(e.id)}).every(function(e){return!e.contains})&&m.slice(0,2).every(function(n){var r=t.findIndex(function(e){return e.id===n});return!Object(o.e)(e,Object(i.c)(t,r,e))})?Object(r.a)(n).concat([m[1]]):n},[]);return u.length?u.map(i.d):[]}(c,t);default:return[]}}},47:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return i});var r="SET_APP_THEME",a=function(e){return{type:r,theme:e}},c="SET_BOARD_THEME",i=function(e){return{type:c,theme:e}}},48:function(e,t,n){"use strict";n.r(t),n.d(t,"files",function(){return r}),n.d(t,"ranks",function(){return a});var r=Object.freeze(["a","b","c","d","e","f","g","h"]),a=Object.freeze([8,7,6,5,4,3,2,1])},49:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=0},52:function(e,t,n){"use strict";var r=n(9),a=n(10),c=new(function(){function e(){Object(r.a)(this,e),this.toaster={}}return Object(a.a)(e,[{key:"register",value:function(e){this.toaster=e}},{key:"popToast",value:function(e){this.toaster.popToast(Object.assign({},{time:Date.now(),type:"INFO",title:"Just so your aware",message:"This is the default toast text!"},e))}},{key:"info",value:function(e,t){this.popToast({type:"INFO",title:e,message:t})}},{key:"success",value:function(e,t){this.popToast({type:"SUCCESS",title:e,message:t})}},{key:"error",value:function(e,t){this.popToast({type:"ERROR",title:e,message:t})}},{key:"warning",value:function(e,t){this.popToast({type:"WARNING",title:e,message:t})}}]),e}());t.a=c},53:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return f});var r=n(2),a=n(1),c=n(49),i=n(32),o=n(16),s=n(23),u=function(e,t){return e>t?t:e<c.a?c.a:e},l=function(e,t){var n=e[t];return n?n.from.id:null},f=function(e){return e.reduce(function(e,t){var n=e.find(function(e){return e.id===t.from.id}),c=e.findIndex(function(e){return e.id===t.to.id}),i=Object(o.a)(n.contains),u=Object(o.c)(e,c,Object(r.a)({},n,{contains:i}));return t.specialMove&&(u=function(e,t){var n=e.type,r=e.squareId;switch(n){case a.a.specialMoves.castling:return Object(s.b)(t,r);case a.a.specialMoves.enPassant:return Object(s.d)(t,r);case a.a.specialMoves.promotion:var c=t.findIndex(function(e){return e.id===r});return Object(o.b)(t,c,{name:e.promoteTo});default:return t}}(t.specialMove,u)),u},Object(i.a)())}},7:function(e,t,n){"use strict";n.d(t,"h",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"g",function(){return f}),n.d(t,"j",function(){return d}),n.d(t,"n",function(){return p}),n.d(t,"l",function(){return m}),n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b}),n.d(t,"d",function(){return g}),n.d(t,"c",function(){return k}),n.d(t,"i",function(){return y}),n.d(t,"f",function(){return E}),n.d(t,"e",function(){return C}),n.d(t,"m",function(){return S});var r=n(84),a=n(6),c=n(2),i=n(1),o=function(e){return JSON.parse(localStorage.getItem(e))||null},s=function(e){return function(t){var n=o(e)||{},r=Object(c.a)({},n,t);return localStorage.setItem(e,JSON.stringify(r)),r}},u=function(){return o(i.a.localUserSettings)},l=s(i.a.localUserSettings),f=function(){return o(i.a.localGameState)},d=s(i.a.localGameState),p=function(e,t,n){return Object(a.a)(e.slice(0,t)).concat([Object(c.a)({},e[t],n)],Object(a.a)(e.slice(t+1)))},m=function(e){return e.slice(0).reverse()},v=function(e){var t=Object(r.a)(e),n=t[0],a=t.slice(1),c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.toUpperCase()+(c?a.join("").toLowerCase():a.join(""))},b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})};var h,g=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},k=function(e){if(!e)return"";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(O(t.getMonth()+1,2),"-").concat(O(t.getDate(),2))},j=(h="object",function(e){return typeof e===h}),y=function e(t,n){return j(t)&&j(n)?Object.keys(t).every(function(r){var a=t[r],c=n[r];return a instanceof Array?a.map(function(t,n){return e(a[n],c[n])}).every(function(e){return!0===e}):a===c}):t===n},E=function(e,t){var n=e.moveResults,r=t.moveResults,c=Object(a.a)(n.values()),i=Object(a.a)(r.values());return Math.max.apply(Math,Object(a.a)(c))>=Math.max.apply(Math,Object(a.a)(i))?e:t},C=function(e){return Object(a.a)(e.keys()).reduce(function(t,n){return e.get(t)>=e.get(n)?t:n})},S=b(function(e){return e.reduce(function(e,t){return Object(a.a)(e).concat(Object(a.a)(t))})},function(e){return e.map(function(e){return e.reverse()})},function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=[],r=0,a=e.length;r<a;)n.push(e.slice(r,r+=t));return n})},88:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var r=n(6),a=n(84),c=n(7),i=n(42),o=n(36),s=/\\.|"([^"\\]*\\.)*[^"\\]*"/,u=function(e,t){var n=Object(i.a)(e),r=1,a=n.reduce(function(e,t,n){var a=0===n||n%2===0,c=a?" ".concat(r,". ").concat(t.pgn):"".concat(t.pgn);return a||r++,"".concat(e," ").concat(c).concat(a||r%5!==0?"":"\n ")},""),o=Object(c.c)(new Date),s=t.isComputer?t.isComputerBlack?["Player","Computer"]:["Computer","Player"]:["Player","Player"],u='\n  [Site "https://bakuzan.github.io/satsuki-junketsu/"]\n  [Date "'.concat(o,'"]\n  [White "').concat(s[0],'"]\n  [Black "').concat(s[1],'"]\n  ').concat(a,"\n  ");!function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(l(u),"chess-game-".concat((new Date).toLocaleString(),".pgn"))},l=function(e){return URL.createObjectURL(new Blob([e]))};var f=function(e,t){var n=e.find(function(e){return e.includes(t)});return n?n.match(s)[0].replace(/"/g,""):""},d=function(e){var t=e.replace(o.e,"").split(o.a),n=Object(a.a)(t),c=n[0];return{gameInformation:c,pgnMoves:n.slice(1).reduce(function(e,t){return Object(r.a)(e).concat(Object(r.a)(t.replace(o.d," ").split(" ").filter(function(e){return!!e&&isNaN(e)})))},[]),vsComputer:function(e){var t=e.split("\n"),n=f(t,"White"),r=f(t,"Black");return{isComputer:"Computer"===n||"Computer"===r,isComputerBlack:"Computer"===r}}(c)}}}},[[157,2,1]]]);
//# sourceMappingURL=main.886837c0.chunk.js.map