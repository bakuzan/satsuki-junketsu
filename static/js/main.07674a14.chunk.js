(this["webpackJsonpsatsuki-junketsu"]=this["webpackJsonpsatsuki-junketsu"]||[]).push([[0],[,function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));const a={pawn:"pawn",rook:"rook",knight:"knight",bishop:"bishop",queen:"queen",king:"king"},r={localUserSettings:"satsukiUserSettings",localGameState:"satsukiSavedGame",colours:{white:"white",black:"black",whiteHex:"#ffffff",blackHex:"#000000"},pieces:a,specialMoves:{promotionSelection:"PROMOTION_SELECT",promotion:"PROMOTION_COMPLETE",enPassant:"EN_PASSANT",castling:"CASTLING"},castling:{kingTargets:["c","g"],rookStarts:["a","h"],rookEnds:["d","f"]},pgn:{piece:{king:"K",queen:"Q",bishop:"B",knight:"N",rook:"R",pawn:""},capture:"x",promotion:"=",castle:{king:"O-O",queen:"O-O-O"},enPassant:"e.p.",check:"+",checkmate:"#"}};t.a=r},,,function(e,t,n){"use strict";var a=n(2),r=n(31),s=n(1),o=n(38);const c=Object(a.a)({Paths:r.a,Strings:s.a,themes:[{name:"Junketsu",class:"theme-one"},{name:"Senketsu",class:"theme-two"}],boardThemes:[{name:"Standard",class:"board-one"},{name:"Desert",class:"board-two"},{name:"Forest",class:"board-three"}]},o);t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f}));var a=n(2),r=n(1),s=n(19),o=n(7);const c=e=>Object(a.a)({},e,{hasMoved:!0}),i=({id:e,rank:t,file:n})=>({id:e,rank:t,file:n}),l=(e,t,n,a,r)=>({from:i(e),to:i(t),piece:c(t.contains),isAmbiguous:Object(s.a)(e,t,n,a),checkStatus:Object(s.c)(t.contains,n),captured:a,specialMove:r}),u=(e,t,n)=>{const a=e.findIndex(e=>e.id===n.id);return Object(o.l)(Object(o.l)(e,t,{contains:n.contains}),a,{contains:null})},d=(e,t,n)=>Object(o.l)(e,t,{contains:n?Object(a.a)({},e[t].contains||{},{},n):null}),p=e=>t=>({type:e,squareId:t}),m=p(r.a.specialMoves.promotionSelection),h=p(r.a.specialMoves.enPassant),f=p(r.a.specialMoves.castling)},,function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"h",(function(){return E})),n.d(t,"e",(function(){return O}));var a=n(2),r=n(1);const s=e=>JSON.parse(localStorage.getItem(e))||null,o=e=>t=>{const n=s(e)||{},r=Object(a.a)({},n,{},t);return localStorage.setItem(e,JSON.stringify(r)),r},c=()=>s(r.a.localUserSettings),i=o(r.a.localUserSettings),l=()=>s(r.a.localGameState),u=o(r.a.localGameState),d=(e,t,n)=>[...e.slice(0,t),Object(a.a)({},e[t],{},n),...e.slice(t+1)],p=e=>e.slice(0).reverse(),m=([e,...t],n=!1)=>e.toUpperCase()+(n?t.join("").toLowerCase():t.join("")),h=(...e)=>e.reduce((e,t)=>(...n)=>e(t(...n)));const f=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),g=(e,t,n=0)=>(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e,b=e=>{if(!e)return"";const t=new Date(e);return"".concat(t.getFullYear(),"-").concat(g(t.getMonth()+1,2),"-").concat(g(t.getDate(),2))},v=(k="object",e=>typeof e===k);var k;const E=(e,t)=>v(e)&&v(t)?Object.keys(e).every(n=>{const a=e[n],r=t[n];return a instanceof Array?a.map((e,t)=>E(a[t],r[t])).every(e=>!0===e):a===r}):e===t,y=e=>t=>{const n=[...t.keys()];if(0!==n.length)return n.reduce((n,a)=>e(t,n,a)?n:a)},O=(y((e,t,n)=>e.get(t).score<=e.get(n).score),y((e,t,n)=>e.get(t).score>=e.get(n).score));h(e=>e.reduce((e,t)=>[...e,...t]),e=>e.map(e=>e.reverse()),(e,t=8)=>{const n=[];let a=0,r=e.length;for(;a<r;)n.push(e.slice(a,a+=t));return n})},function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(4),r=n(27);const s=e=>0===e||e%2===0,o=e=>s(e.length)?a.a.Strings.colours.white:a.a.Strings.colours.black,c=e=>e.contains.colour===a.a.Strings.colours.white?a.a.Strings.colours.black:a.a.Strings.colours.white,i=(e,t,n,s)=>{const o=!(n.files||n.ranks);for(let c=0,i=s.length;c<i;c++){const i=s[c];if(null===i.contains)continue;if(Object(r.d)(e,i))continue;const l=a.a.files.findIndex(e=>e===i.file);if(o){if(Object(r.c)(l,e,t,i))return!1}else if(n.files&&i.file===t.file){if(Object(r.b)(e.rank,t.rank,i.rank))return!1}else if(n.ranks&&i.rank===t.rank){const n=a.a.files.findIndex(t=>t===e.file),s=a.a.files.findIndex(e=>e===t.file);if(Object(r.b)(n,s,l))return!1}}return!0},l=(e,t,n)=>{const{contains:r}=e,s={files:e.file===t.file,ranks:e.rank===t.rank},o=a.a.files.findIndex(t=>t===e.file),c=a.a.files.findIndex(e=>e===t.file),l=Math.abs(c-o),u=Math.abs(t.rank-e.rank);switch(r.name){case a.a.Strings.pieces.pawn:if(!s.files)return!1;if(r.colour===a.a.Strings.colours.white){if(2===e.rank&&3===t.rank)return!0;if(2===e.rank&&4===t.rank)return i(e,t,s,n);if(1===u&&e.rank<t.rank)return!0}else if(r.colour===a.a.Strings.colours.black){if(7===e.rank&&6===t.rank)return!0;if(7===e.rank&&5===t.rank)return i(e,t,s,n);if(1===u&&e.rank>t.rank)return!0}return!1;case a.a.Strings.pieces.rook:return!(!s.files&&!s.ranks)&&i(e,t,s,n);case a.a.Strings.pieces.knight:return!s.files&&!s.ranks&&(1===u&&2===l||2===u&&1===l);case a.a.Strings.pieces.bishop:return l===u&&i(e,t,s,n);case a.a.Strings.pieces.queen:return(s.files||s.ranks||l===u)&&i(e,t,s,n);case a.a.Strings.pieces.king:return!(!s.ranks||1!==l)||(!(!s.files||1!==u)||1===u&&1===l);default:return!1}},u=(e,t,n)=>{const{contains:r}=e,s=n.find(e=>e.file===t.file&&e.rank===t.rank);if(!s||!s.contains)return!1;if(s.contains.colour===r.colour)return!1;switch(r.name){case a.a.Strings.pieces.pawn:{const n=a.a.files.findIndex(t=>t===e.file),s=a.a.files.findIndex(e=>e===t.file);return 1===Math.abs(s-n)&&1===Math.abs(t.rank-e.rank)&&(e.rank<t.rank&&r.colour===a.a.Strings.colours.white||e.rank>t.rank&&r.colour===a.a.Strings.colours.black)}case a.a.Strings.pieces.rook:case a.a.Strings.pieces.knight:case a.a.Strings.pieces.bishop:case a.a.Strings.pieces.queen:case a.a.Strings.pieces.king:return l(e,t,n);default:return!1}};function d(e,t,n){const{contains:r}=e,s=n.find(e=>e.file===t.file&&e.rank===t.rank);if(!s||!s.contains)return!1;switch(r.name){case a.a.Strings.pieces.pawn:{const n=a.a.files.findIndex(t=>t===e.file),s=a.a.files.findIndex(e=>e===t.file);return 1===Math.abs(s-n)&&1===Math.abs(t.rank-e.rank)&&(e.rank<t.rank&&r.colour===a.a.Strings.colours.white||e.rank>t.rank&&r.colour===a.a.Strings.colours.black)}case a.a.Strings.pieces.rook:case a.a.Strings.pieces.knight:case a.a.Strings.pieces.bishop:case a.a.Strings.pieces.queen:case a.a.Strings.pieces.king:return l(e,t,n);default:return!1}}},function(e,t,n){"use strict";n.r(t),n.d(t,"BOARD_SELECT_SQUARE",(function(){return a})),n.d(t,"selectBoardSquare",(function(){return r})),n.d(t,"BOARD_MOVE_PIECE",(function(){return s})),n.d(t,"moveSelectedPiece",(function(){return o})),n.d(t,"BOARD_TAKE_PIECE",(function(){return c})),n.d(t,"takePiece",(function(){return i})),n.d(t,"BOARD_SPECIAL_MOVE",(function(){return l})),n.d(t,"performSpecialMove",(function(){return u})),n.d(t,"BOARD_RESET",(function(){return d})),n.d(t,"resetBoard",(function(){return p})),n.d(t,"BOARD_IMPORT_GAME",(function(){return m})),n.d(t,"importGame",(function(){return h})),n.d(t,"BOARD_SAVE_GAME",(function(){return f})),n.d(t,"saveGame",(function(){return g})),n.d(t,"BOARD_LOAD_GAME",(function(){return b})),n.d(t,"loadGame",(function(){return v})),n.d(t,"BOARD_TOGGLE_REVERSE",(function(){return k})),n.d(t,"toggleReverseBoard",(function(){return E})),n.d(t,"BOARD_COMPUTER_MOVE",(function(){return y})),n.d(t,"performComputerMove",(function(){return O}));const a="BOARD_SELECT_SQUARE",r=e=>({type:a,squareId:e}),s="BOARD_MOVE_PIECE",o=e=>({type:s,targetSquareId:e}),c="BOARD_TAKE_PIECE",i=e=>({type:c,targetSquareId:e}),l="BOARD_SPECIAL_MOVE",u=e=>({type:l,specialMove:e}),d="BOARD_RESET",p=e=>({type:d,option:e}),m="BOARD_IMPORT_GAME",h=e=>({type:m,fileText:e}),f="BOARD_SAVE_GAME",g=()=>({type:f}),b="BOARD_LOAD_GAME",v=()=>({type:b}),k="BOARD_TOGGLE_REVERSE",E=()=>({type:k}),y="BOARD_COMPUTER_MOVE",O=e=>({type:y,move:e})},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));var a=n(2),r=n(1),s=n(5);function o(e,t,n,r){const o=e.squares.find(e=>e.id===t),c=e.squares.findIndex(e=>e.id===n),i=Object(s.a)(o.contains),l=e.squares[c].contains?Object(a.a)({},e.squares[c].contains):null,u=Object(s.c)(e.squares,c,Object(a.a)({},o,{contains:i})),d=[...e.moves,Object(s.g)(o,u[c],u,l,r)],p=l?[...e.graveyard,l].filter(e=>!!e):e.graveyard;return Object(a.a)({},e,{selectedSquareId:null,squares:u,moves:d,graveyard:p})}function c(e,t){const n=e.find(e=>e.id===t);n.contains.hasCastled=!0;const o=r.a.castling.kingTargets.findIndex(e=>e===n.file),c=e.find(e=>e.rank===n.rank&&e.file===r.a.castling.rookStarts[o]),i=e.findIndex(e=>e.rank===n.rank&&e.file===r.a.castling.rookEnds[o]),l=Object(s.a)(c.contains);return Object(s.c)(e,i,Object(a.a)({},c,{contains:l}))}function i(e,t){const n=e.squares.find(e=>e.id===t),o=n.contains.colour===r.a.colours.white?1:-1,c=n.rank-o,i=e.squares.findIndex(e=>e.file===n.file&&e.rank===c),l=Object(a.a)({},e.squares[i].contains),u=Object(s.b)(e.squares,i,null),d=e.moves.length-1,p=[...e.moves.slice(0,d),Object(a.a)({},e.moves[d],{captured:Object(a.a)({},l)})];return Object(a.a)({},e,{squares:u,moves:p,graveyard:[...e.graveyard,l]})}function l(e,t){return i({moves:[],graveyard:[],squares:e},t).squares}},,,,,,,function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h}));var a=n(2),r=n(4),s=n(5),o=n(8);const c=(e,t)=>{const n=e.contains.colour,a=t.find(l(n));return!!u(a,t).length},i=({selectedSquareId:e,squares:t})=>{if(null===e)return[];const n=t.find(t=>t.id===e);return t.reduce((e,a,r)=>(a.contains?o.e:o.d)(n,a,t)&&!c(n,Object(s.c)(t,r,n))?[...e,a.id]:e,[])},l=e=>t=>t.contains&&t.contains.name===r.a.Strings.pieces.king&&t.contains.colour===e,u=(e,t)=>t.filter(t=>e&&t.contains&&t.contains.colour!==e.contains.colour).reduce((n,a)=>Object(o.e)(a,e,t)?[...n,a]:n,[]),d=(e,t)=>{const n=t.find(l(e)),a=u(n,t);return{kingSquare:n,attackers:a,isCheckmate:!!a.length&&!((e,t)=>t.filter(t=>t.contains&&t.contains.colour===e).some(e=>!!i({selectedSquareId:e.id,squares:t}).length))(e,t)}},p=(e,t)=>{const n=e.colour===r.a.Strings.colours.white?r.a.Strings.colours.black:r.a.Strings.colours.white,{attackers:a,isCheckmate:s}=d(n,t);return{isCheck:!!a.length,isCheckmate:s}},m=[r.a.Strings.pieces.king,r.a.Strings.pieces.queen,r.a.Strings.pieces.bishop],h=(e,t,n,r)=>{const c=t.contains;if(m.includes(c.name))return!1;const i=n.filter(e=>e.id!==t.id&&e.contains&&e.contains.name===c.name&&e.contains.colour===c.colour);if(0===i.length)return!1;const l=n.findIndex(t=>t.id===e.id),u=n.findIndex(e=>e.id===t.id);let d=Object(s.b)(n,l,Object(a.a)({},t.contains));d=Object(s.b)(d,u,r);const p=r?o.e:o.d;return i.some(e=>p(e,t,d))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i}));const a="PLAYBACK_UPDATE_SLIDE_POSITION",r=(e,t)=>({type:a,sliderValue:t}),s="PLAYBACK_STEP_FORWARD",o=(e,t)=>({type:s,stepDirection:t}),c="PLAYBACK_STEP_BACK",i=(e,t)=>({type:c,stepDirection:t})},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(2),r=n(4);const{pieces:s,colours:o}=r.a.Strings,c=(e,t)=>{if(-1===[1,2,7,8].indexOf(e))return null;let n="",r="";const c=e<5?o.white:o.black;return[2,7].indexOf(e)>-1?[n,r]=[s.pawn,"p"]:["a","h"].indexOf(t)>-1?[n,r]=[s.rook,"r"]:["b","g"].indexOf(t)>-1?[n,r]=[s.knight,"n"]:["c","f"].indexOf(t)>-1?[n,r]=[s.bishop,"b"]:[n,r]="d"===t?[s.queen,"q"]:[s.king,"k"],Object(a.a)({id:"".concat(c.slice(0,1),"-").concat(r,"-").concat(t),name:n,colour:c,hasMoved:!1},n===s.king?{hasCastled:!1}:{})},i=()=>{let e=r.a.files.slice(0),t=-1;return Array(64).fill(null).map((n,a)=>{const r=8-Math.floor(a/8),s=(a+r)%8;s===t&&(e.push(e.shift()),t=-1);const o=e[s];return t=s,{id:a,rank:r,file:o,contains:c(r,o)}})},l=(e,t)=>e.rank===t.rank&&e.file===t.file,u=(e,t,n)=>e<n&&n<t||e>n&&n>t,d=(e,t,n,a)=>{const s=r.a.files.findIndex(e=>e===t.file);if(Math.abs(e-s)!==Math.abs(a.rank-t.rank))return!1;if(!u(t.rank,n.rank,a.rank))return!1;const o=r.a.files.findIndex(e=>e===n.file);return!!u(s,o,e)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4),r=n(5),s=n(19);const{Strings:o}=a.a;function c(e,t){const n=e.contains.colour===o.colours.white?8:1;return 1!==Math.abs(e.rank-n)?[]:Object(s.d)({selectedSquareId:e.id,squares:t}).map(r.f)}function i(e,t){const{squares:n,moves:s}=t,[c]=s.slice(-1);if(!c)return[];if(c.piece.name!==o.pieces.pawn)return[];const i=c.piece.colour===o.colours.white?2:7,l=e.contains.colour===o.colours.white?-1:1,u=i+2*l;if(c.from.rank!==i||c.to.rank!==e.rank||c.to.rank!==u)return[];const d=a.a.files.findIndex(e=>e===c.to.file),p=a.a.files.findIndex(t=>t===e.file);if(1!==Math.abs(d-p))return[];const m=n.find(e=>e.file===c.to.file&&e.rank===c.to.rank-l);return[Object(r.e)(m.id)]}function l(e){const{squares:t,selectedSquareId:n}=e,a=t.find(e=>e.id===n);if(!a)return[];switch(a.contains.name){case o.pieces.pawn:return function(e,t){return[...c(e,t.squares),...i(e,t)]}(a,e);case o.pieces.king:return function(e,t){if(e.contains.hasMoved)return[];const n=t.filter(t=>t.contains&&t.contains.name===o.pieces.rook&&t.contains.colour===e.contains.colour&&!t.contains.hasMoved);if(!n.length)return[];const a=e.id,c=n.reduce((n,o)=>{const c=o.id,[i,l]=c<a?[c,a]:[a,c],u=Array.from(new Array(l-i-1),(e,t)=>1+t+i);return!t.filter(e=>u.includes(e.id)).every(e=>!e.contains)?n:u.slice(0,2).every(n=>{const a=t.findIndex(e=>e.id===n),o=Object(r.c)(t,a,e);return!Object(s.e)(e,o)})?[...n,u[1]]:n},[]);return c.length?c.map(r.d):[]}(a,t);default:return[]}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return i}));const a=/\n/g,r=/\d\. /g,s=/\d\/\d-\d\/\d$|\d\/\d$|\{.*\}/g,o=/.*=/,c=/.*(?=[a-h]\d)/g,i=/[a-h]x[a-h]|[a-h]{2}/},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={base:"/satsuki-junketsu"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2);const r=Object.freeze([{id:1,text:"vs Computer (You as White)"},{id:2,text:"vs Computer (You as Black)"},{id:3,text:"vs Player"}]);t.b=r;const s=Object.freeze(r.reduce((e,t)=>{const n=t.text.replace(/\(|\)| |as/g,"");return Object(a.a)({},e,{[n]:t.id})},{}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var a=n(1),r=n(30),s=n(8),o=n(7);function c(e){const t=Object(o.d)();let n="";if(e.specialMove&&e.specialMove.type===a.a.specialMoves.castling){return{id:t,pgn:"g"===e.to.file?a.a.pgn.castle.king:a.a.pgn.castle.queen}}n+=a.a.pgn.piece[e.piece.name],e.isAmbiguous&&(n+="".concat(e.from.file)),e.captured&&(n+="".concat(a.a.pgn.capture)),n+="".concat(e.to.file).concat(e.to.rank),e.specialMove&&e.specialMove.type===a.a.specialMoves.promotion&&(n+="".concat(a.a.pgn.promotion).concat(a.a.pgn.piece[e.specialMove.promoteTo]||"")),e.specialMove&&e.specialMove.type===a.a.specialMoves.enPassant&&(n+="".concat(a.a.pgn.enPassant));const{isCheck:r,isCheckmate:s}=e.checkStatus;return!s&&r&&(n+=a.a.pgn.check),s&&(n+=a.a.pgn.checkmate),{id:t,pgn:n}}const i=e=>e.map(c),l=e=>Object.keys(a.a.pgn.piece).find(t=>a.a.pgn.piece[t]===e)||a.a.pieces.pawn;function u(e,t){const n=Object(s.f)(t),o=n?a.a.colours.white:a.a.colours.black,c=n?a.a.colours.black:a.a.colours.white,i=function(e){return e===a.a.pgn.castle.king||e===a.a.pgn.castle.queen?{type:a.a.specialMoves.castling}:e.includes(a.a.pgn.promotion)?{type:a.a.specialMoves.promotion,promoteTo:l(e.replace(r.c,""))}:e.includes(a.a.pgn.enPassant)?{type:a.a.specialMoves.enPassant}:null}(e),u=i&&i.type===a.a.specialMoves.castling,d=l(e.slice(0,1)),p=u?{colour:o,name:a.a.pieces.king,hasMoved:!0}:{colour:o,name:d,hasMoved:!0},[m,h]=e.replace(r.b,"").split(""),f=u?function(e,t){const n=t?1:8;return 3===e.length?{file:"g",rank:n}:{file:"c",rank:n}}(e,n):{file:m,rank:Number(h)},g=u?((e,t)=>({file:"e",rank:t?1:8}))(0,n):function(e){const t=r.f.exec(e);return t?{file:t[0].slice(0,1)}:null}(e);return{from:g,piece:p,to:f,isAmbiguous:!u&&!!g,specialMove:i,captured:e.includes("x")?{colour:c}:null,checkStatus:{isCheck:e.includes("+"),isCheckmate:e.includes("#")}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return o}));const a="SET_APP_THEME",r=e=>({type:a,theme:e}),s="SET_BOARD_THEME",o=e=>({type:s,theme:e})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"files",(function(){return a})),n.d(t,"ranks",(function(){return r}));const a=Object.freeze(["a","b","c","d","e","f","g","h"]),r=Object.freeze([8,7,6,5,4,3,2,1])},function(e,t,n){"use strict";const a=new class{constructor(){this.toaster={}}register(e){this.toaster=e}popToast(e){this.toaster.popToast(Object.assign({},{time:Date.now(),type:"INFO",title:"Just so your aware",message:"This is the default toast text!"},e))}info(e,t){this.popToast({type:"INFO",title:e,message:t})}success(e,t){this.popToast({type:"SUCCESS",title:e,message:t})}error(e,t){this.popToast({type:"ERROR",title:e,message:t})}warning(e,t){this.popToast({type:"WARNING",title:e,message:t})}};t.a=a},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(2),r=n(1),s=n(35),o=n(27),c=n(5),i=n(12);const l=(e,t)=>e>t?t:e<s.a?s.a:e,u=(e,t)=>{const n=e[t];return n?n.from.id:null},d=e=>e.reduce((e,t)=>{const n=e.find(e=>e.id===t.from.id),s=e.findIndex(e=>e.id===t.to.id),o=Object(c.a)(n.contains);let l=Object(c.c)(e,s,Object(a.a)({},n,{contains:o}));return t.specialMove&&(l=((e,t)=>{const{type:n,squareId:a}=e;switch(n){case r.a.specialMoves.castling:return Object(i.b)(t,a);case r.a.specialMoves.enPassant:return Object(i.d)(t,a);case r.a.specialMoves.promotion:{const n=t.findIndex(e=>e.id===a);return Object(c.b)(t,n,{name:e.promoteTo})}default:return t}})(t.specialMove,l)),l},Object(o.a)())},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(7),r=n(33),s=n(30);const o=/\\.|"([^"\\]*\\.)*[^"\\]*"/,c=(e,t)=>{const n=Object(r.a)(e);let s=1;const o=n.reduce((e,t,n)=>{const a=0===n||n%2===0,r=a?" ".concat(s,". ").concat(t.pgn):"".concat(t.pgn);return a||s++,"".concat(e," ").concat(r).concat(a||s%5!==0?"":"\n ")},""),c=Object(a.c)(new Date),l=t.isComputer?t.isComputerBlack?["Player","Computer"]:["Computer","Player"]:["Player","Player"],u='\n  [Site "https://bakuzan.github.io/satsuki-junketsu/"]\n  [Date "'.concat(c,'"]\n  [White "').concat(l[0],'"]\n  [Black "').concat(l[1],'"]\n  ').concat(o,"\n  ");!function(e,t){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(i(u),"chess-game-".concat((new Date).toLocaleString(),".pgn"))},i=e=>URL.createObjectURL(new Blob([e]));const l=(e,t)=>{const n=e.find(e=>e.includes(t));return n?n.match(o)[0].replace(/"/g,""):""},u=e=>{const[t,...n]=e.replace(s.e,"").split(s.a);return{gameInformation:t,pgnMoves:n.reduce((e,t)=>[...e,...t.replace(s.d," ").split(" ").filter(e=>!!e&&isNaN(e))],[]),vsComputer:(e=>{const t=e.split("\n"),n=l(t,"White"),a=l(t,"Black");return{isComputer:"Computer"===n||"Computer"===a,isComputerBlack:"Computer"===a}})(t)}}},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(104)},,,,,,function(e,t,n){e.exports=n(103)},,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(23),o=n.n(s),c=n(10),i=n(21),l=n(61),u=n.n(l),d=n(24),p=n(36),m=n(52);class h extends r.a.Component{constructor(e){super(e),this.el=document.createElement(e.parentTag),this.getTargetNode=()=>document.querySelector(e.targetSelector)}componentDidMount(){this.getTargetNode().appendChild(this.el)}componentWillUnmount(){const e=this.getTargetNode();e&&e.removeChild(this.el)}render(){return o.a.createPortal(this.props.children,this.el)}}h.defaultProps={parentTag:"div"};var f=h;const g=({name:e,value:t,disabled:n,onSelect:a,text:s,options:o})=>r.a.createElement("div",{className:"has-float-label select-container"},r.a.createElement("select",{className:"select-box",name:e,value:t,onChange:e=>a(e),disabled:n},o.map(e=>r.a.createElement("option",{key:e.value,value:e.value},e.text))),r.a.createElement("label",null,s));g.defaultProps={disabled:!1};var b=g;n(83);var v=({name:e,checked:t,disabled:n,onChange:a,text:s})=>r.a.createElement("div",{className:"input-container"},r.a.createElement("label",{className:"tickbox"},r.a.createElement("input",{type:"checkbox",name:e,checked:t,disabled:n,onChange:a}),s)),k=n(34),E=n(9),y=n(4);n(84);const O=e=>({text:e.name,value:e.class}),C=y.a.themes.map(O),S=y.a.boardThemes.map(O);class w extends r.a.Component{constructor(e){super(e),this.state={isDropdownOpen:!1},this.handleDropdownChange=this.handleDropdownChange.bind(this),this.handleCloseAppSettings=this.handleCloseAppSettings.bind(this),this.toggleDropdown=this.toggleDropdown.bind(this)}handleDropdownChange(e){return t=>{e(t.target.value),this.handleCloseAppSettings()}}handleCloseAppSettings(){this.setState({isDropdownOpen:!1})}toggleDropdown(){this.setState(e=>({isDropdownOpen:!e.isDropdownOpen}))}render(){const{appTheme:e,boardTheme:t,setApplicationTheme:n,setBoardTheme:a,reverseBoard:s,toggleReverseBoard:o}=this.props;return(e=>{document.body.className=e})(e),r.a.createElement("div",{id:"app-settings"},r.a.createElement("input",{type:"checkbox",value:this.state.isDropdownOpen,id:"app-settings-toggler",onChange:this.toggleDropdown}),r.a.createElement("label",{icon:"\u2699",htmlFor:"app-settings-toggler",title:"App settings"}),this.state.isDropdownOpen&&r.a.createElement(f,{targetSelector:"main"},r.a.createElement("div",{id:"app-settings-backdrop",role:"button",onClick:this.handleCloseAppSettings}),r.a.createElement("ul",{id:"app-settings-menu",className:"dropdown-menu",role:"menu"},r.a.createElement("li",{className:"dropdown-arrow"}),r.a.createElement("li",null,r.a.createElement(b,{name:"appTheme",text:"App Theme",value:e,options:C,onSelect:this.handleDropdownChange(n)})),r.a.createElement("li",null,r.a.createElement(b,{name:"boardTheme",text:"Board Theme",value:t,options:S,onSelect:this.handleDropdownChange(a)})),r.a.createElement("li",null,r.a.createElement(v,{name:"reverseBoard",text:"Flip board on move",checked:s,onChange:o})))))}}const M={setApplicationTheme:k.c,setBoardTheme:k.d,toggleReverseBoard:E.toggleReverseBoard};var j=Object(c.c)(e=>({appTheme:e.theme.app,boardTheme:e.theme.board,reverseBoard:e.board.reverseBoard}),M)(w);n(85);class x extends a.Component{constructor(){super(),this.letterClass="letter",this.animate="hideshow",this.sideLength=50}componentDidMount(){const e=Object(s.findDOMNode)(this);this.characters=e.querySelectorAll("text.letter"),this.cycleCharacters()}cycleCharacters(){clearInterval(this.interval),this.interval=setInterval(()=>{const e=Array.from(this.characters).findIndex(e=>e.getAttribute("class").indexOf(this.animate)>-1),t=e+1<this.characters.length?e+1:0;-1!==e&&this.characters[e].setAttribute("class",this.letterClass),this.characters[t].setAttribute("class","".concat(this.letterClass," ").concat(this.animate))},3e3)}renderLetters(e){return e.toUpperCase().split("").map((e,t)=>r.a.createElement("text",{key:t,className:"letter",x:"50%",y:"50%",dy:"0.3em"},e))}render(){const e=this.renderLetters(this.props.text);return r.a.createElement("div",{className:"svg-logo"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},e,r.a.createElement("text",{className:"word diagonal",x:"50%",y:"50%",dy:"0.3em",textLength:this.sideLength,lengthAdjust:"spacingAndGlyphs"},this.props.text.toUpperCase())))}}var L=x,A=n(31);n(86);class D extends a.Component{render(){return r.a.createElement("nav",{className:"satsuki-header center-contents"},r.a.createElement(m.a,{className:"ripple",id:"satsuki-svg",to:A.a.base},r.a.createElement(L,{text:"Satsuki Junketsu"})),r.a.createElement("h1",null,"SATSUKI JUNKETSU"),r.a.createElement("div",{id:"navigation-links"},r.a.createElement("div",{className:"flex-right center-vertically"},r.a.createElement(j,null))))}}var q=D,I=n(11),B=n.n(I),T=n(39);n(90);class P extends r.a.Component{constructor(){super(),this.state={stack:Array(0)},this.timer=null,T.a.register(this)}removeColdToast(){return this.state.stack.filter(e=>e.time>Date.now()-3e3)}removeToast(e){const t=this.removeColdToast().filter(t=>t.time!==e);this.setState({stack:t})}eatToast(){clearTimeout(this.timer),this.timer=setTimeout(()=>this.removeToast(),3e3)}popToast(e){this.setState({stack:[...this.state.stack,e]}),this.eatToast()}render(){const e=this.state.stack||Array(0);return r.a.createElement("div",{className:B()("toaster")},e.map(e=>{const t=()=>this.removeToast(e.time);return r.a.createElement("span",{key:e.time,role:"button",tabIndex:"0",className:B()("toast",e.type.toLowerCase()),onClick:t,onKeyDown:t},r.a.createElement("span",{className:B()("toast__title")},e.title),r.a.createElement("span",{className:B()("toast__message")},e.message))}))}}var N=P;n(91);const R=e=>(e||"").trim();class _ extends r.a.PureComponent{constructor(e){super(e),this.state={hovered:!1},this.handleHovered=this.handleHovered.bind(this)}handleHovered(e){return()=>this.setState({hovered:e})}render(){const e=R("master "),t=R("3.0.0");return r.a.createElement("div",{className:B()("app-information"),onMouseEnter:this.handleHovered(!0),onMouseLeave:this.handleHovered(!1),"aria-label":"Branch ".concat(e,", version ").concat(t)},r.a.createElement("div",{className:B()("app-information__detail",{"app-information__detail--visible":this.state.hovered})},"Branch: ",e,r.a.createElement("br",null),"Version: ",t))}}var G=_;var z=r.a.memo((function({children:e}){return r.a.createElement("div",{className:"satsuki"},r.a.createElement(q,null),r.a.createElement("main",null,e),r.a.createElement(N,null),r.a.createElement(G,null))})),U=n(13),W=n(2),V=n(16);n(92);class H extends a.Component{renderScale(e){return e.map(e=>r.a.createElement("div",{key:e},e))}render(){const e=this.renderScale(this.props.files),t=this.renderScale(this.props.ranks);return r.a.createElement("span",{className:"scales"},r.a.createElement("span",{className:"scale file top"},e),r.a.createElement("span",{className:"scale file bottom"},e),r.a.createElement("span",{className:"scale rank left"},t),r.a.createElement("span",{className:"scale rank right"},t))}}var F=H,K=n(106),J=n(64),Y=n(65),Q=n(107),$=Object.freeze({piece:"piece",square:"square"});const X={canDrop:(e,t)=>e.dropActions.canDrop(e.id,t.getItem()),drop:(e,t)=>e.dropActions.onDrop(e.id,t.getItem())};function Z(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}var ee=n(108);function te(e){return e.onDrag&&e.onDrag(e),e}const ne={beginDrag:te,endDrag:te};function ae(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}const re=function(){return"undefined"!==typeof window};function se(){return function(){if(re()){var e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;if(e)document.getElementsByTagName("html")[0].classList.add("touchevents");return e}return!1}()?Y.a:J.a}re()&&"document"in window&&("classList"in document.createElement("_")?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,a=arguments.length;for(n=0;n<a;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)===!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,a=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},o=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},c=function(e){for(var t=a.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,s=n.length;r<s;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},i=c.prototype=[],l=function(){return new c(this)};if(s.prototype=Error.prototype,i.item=function(e){return this[e]||null},i.contains=function(e){return-1!==o(this,e+="")},i.add=function(){var e,t=arguments,n=0,a=t.length,r=!1;do{e=t[n]+"",-1===o(this,e)&&(this.push(e),r=!0)}while(++n<a);r&&this._updateClassName()},i.remove=function(){var e,t,n=arguments,a=0,r=n.length,s=!1;do{for(e=n[a]+"",t=o(this,e);-1!==t;)this.splice(t,1),s=!0,t=o(this,e)}while(++a<r);s&&this._updateClassName()},i.toggle=function(e,t){e+="";var n=this.contains(e),a=n?!0!==t&&"remove":!1!==t&&"add";return a&&this[a](e),!0===t||!1===t?t:!n},i.toString=function(){return this.join(" ")},n.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",u)}catch(d){-2146823252===d.number&&(u.enumerable=!1,n.defineProperty(t,"classList",u))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",l)}}(window));const oe=function(e){class t extends r.a.Component{render(){const t=this.props,{connectDropTarget:n}=t,a=Object(V.a)(t,["connectDropTarget"]);return r.a.createElement(e,Object.assign({},a,{ref:e=>n(Object(s.findDOMNode)(e))}))}}return Object(Q.a)($.piece,X,Z)(t)},ce=function(e){class t extends r.a.Component{componentDidMount(){}render(){const t=this.props,{connectDragSource:n,connectDragPreview:a}=t,o=Object(V.a)(t,["connectDragSource","connectDragPreview"]);return r.a.createElement(e,Object.assign({},o,{ref:e=>n(Object(s.findDOMNode)(e))}))}}return Object(ee.a)($.piece,ne,ae)(t)};var ie=n(1);const le=e=>e===ie.a.colours.white?ie.a.colours.whiteHex:ie.a.colours.blackHex;function ue(e){class t extends r.a.Component{render(){const t=function(e,t){const n=t===ie.a.colours.white,a=n?ie.a.colours.black:ie.a.colours.white,r=le(t),s=le(a);switch(e){case ie.a.pieces.bishop:return{outline:{fill:r},detail:{stroke:s}};case ie.a.pieces.king:return{topCap:{fill:r},mainBody:{fill:r},lines:{stroke:s}};case ie.a.pieces.knight:return{face:{fill:s,stroke:s},mane:{fill:s},mainBody:{fill:r}};case ie.a.pieces.pawn:return{fill:r};case ie.a.pieces.queen:return{isWhite:n,mainBody:{fill:r}};case ie.a.pieces.rook:return{fill:r};default:return{}}}(e.displayName,this.props.colour);return r.a.createElement(e,{size:"100%",viewBox:"-2 0 50 50",styleSettings:t})}}return t}const de={opacity:1,fill:"none",fillRule:"evenodd",fillOpacity:1,stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},pe={fill:"#000000",stroke:"#000000",strokeLinecap:"butt"},me={fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"},he=({size:e,viewBox:t,styleSettings:n})=>{const a=Object(W.a)({},pe,{},n.outline),s=Object(W.a)({},me,{},n.detail);return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:de},r.a.createElement("g",{style:a},r.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),r.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),r.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),r.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:s})))};he.displayName=ie.a.pieces.bishop;var fe=ue(he);const ge={fill:"none",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},be={fill:"none",stroke:"#000000",strokeLinejoin:"miter"},ve={fill:"#000000",fillOpacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"},ke={fill:"#000000",stroke:"#000000"},Ee={fill:"none",stroke:"#000000",strokeLinejoin:"miter"},ye={fill:"none",stroke:"#ffffff"},Oe=({size:e,viewBox:t,styleSettings:n})=>{const a=Object(W.a)({},ve,{},n.topCap),s=Object(W.a)({},ke,{},n.mainBody),o=Object(W.a)({},ye,{},n.lines);return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:ge},r.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:be}),r.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:a}),r.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:s}),r.a.createElement("path",{d:"M 20,8 L 25,8",style:Ee}),r.a.createElement("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85",style:o}),r.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37",style:o})))};Oe.displayName=ie.a.pieces.king;var Ce=ue(Oe);const Se={opacity:1,fill:"none",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},we={fill:"#000000",stroke:"#000000"},Me={fill:"#ffffff",stroke:"#ffffff"},je={fill:"#ffffff",stroke:"none"},xe=({size:e,viewBox:t,styleSettings:n})=>{const a=Object(W.a)({},je,{},n.mane),s=Object(W.a)({},Me,{},n.face),o=Object(W.a)({},we,{},n.mainBody);return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:Se},r.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:o}),r.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:o}),r.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:s}),r.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:s}),r.a.createElement("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:a})))};xe.displayName=ie.a.pieces.knight;var Le=ue(xe);const Ae={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"nonzero",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},De=({size:e,viewBox:t,styleSettings:n})=>r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:Object(W.a)({},Ae,{},n)}));De.displayName=ie.a.pieces.pawn;var qe=ue(De);const Ie={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Be={fill:"#000000",stroke:"none"},Te={strokeLinecap:"butt",stroke:"#000000"},Pe={strokeLinecap:"butt"},Ne={fill:"none",stroke:"#000000",strokeLinecap:"butt"},Re={fill:"none",stroke:"#ffffff"},_e={fill:"none"},Ge=({size:e,viewBox:t,styleSettings:n})=>n.isWhite?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:Object(W.a)({},Ie,{},n.mainBody)},r.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(-1,-1)"}),r.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(15.5,-5.5)"}),r.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(32,-1)"}),r.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(7,-4.5)"}),r.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(24,-4)"}),r.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z ",style:Pe}),r.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z ",style:Pe}),r.a.createElement("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:_e}),r.a.createElement("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:_e}))):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:Ie},r.a.createElement("g",{style:Be},r.a.createElement("circle",{cx:"6",cy:"12",r:"2.75"}),r.a.createElement("circle",{cx:"14",cy:"9",r:"2.75"}),r.a.createElement("circle",{cx:"22.5",cy:"8",r:"2.75"}),r.a.createElement("circle",{cx:"31",cy:"9",r:"2.75"}),r.a.createElement("circle",{cx:"39",cy:"12",r:"2.75"})),r.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:Te}),r.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z",style:Pe}),r.a.createElement("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:Ne}),r.a.createElement("path",{d:"M 11,29 A 35,35 1 0 1 34,29",style:Re}),r.a.createElement("path",{d:"M 12.5,31.5 L 32.5,31.5",style:Re}),r.a.createElement("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5",style:Re}),r.a.createElement("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5",style:Re})));Ge.displayName=ie.a.pieces.queen;var ze=ue(Ge);const Ue={opacity:1,fill:"#000000",fillOpacity:1,fillRule:"evenodd",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},We={strokeLinecap:"butt"},Ve={strokeLinecap:"butt",strokeLinejoin:"miter"},He={fill:"none",stroke:"#ffffff",strokeWidth:1,strokeLinejoin:"miter"},Fe=({size:e,viewBox:t,styleSettings:n})=>{const a=Object(W.a)({},Ue,{},n);return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t,width:e,height:e},r.a.createElement("g",{style:a},r.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:We}),r.a.createElement("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:We}),r.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:We}),r.a.createElement("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:Ve}),r.a.createElement("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:We}),r.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:We}),r.a.createElement("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:He}),r.a.createElement("path",{d:"M 13,31.5 L 32,31.5",style:He}),r.a.createElement("path",{d:"M 14,29.5 L 31,29.5",style:He}),r.a.createElement("path",{d:"M 14,16.5 L 31,16.5",style:He}),r.a.createElement("path",{d:"M 11,14 L 34,14",style:He})))};Fe.displayName=ie.a.pieces.rook;var Ke={Bishop:fe,King:Ce,Knight:Le,Pawn:qe,Queen:ze,Rook:ue(Fe)},Je=n(7);n(93);class Ye extends r.a.Component{shouldComponentUpdate(e){const t=e.isDragging!==this.props.isDragging,n=!Object(Je.h)(e,this.props);return t||n}renderCoolChessPieceSvg(e,t){switch(e){case ie.a.pieces.bishop:return r.a.createElement(Ke.Bishop,{colour:t});case ie.a.pieces.king:return r.a.createElement(Ke.King,{colour:t});case ie.a.pieces.knight:return r.a.createElement(Ke.Knight,{colour:t});case ie.a.pieces.pawn:return r.a.createElement(Ke.Pawn,{colour:t});case ie.a.pieces.queen:return r.a.createElement(Ke.Queen,{colour:t});case ie.a.pieces.rook:return r.a.createElement(Ke.Rook,{colour:t});default:return null}}render(){const{name:e,colour:t,isDragging:n}=this.props;return r.a.createElement("div",{"aria-label":"".concat(t," ").concat(e),className:B()("piece",{["".concat(t,"-").concat(e)]:!0,"piece--dragging":n})},this.renderCoolChessPieceSvg(e,t))}}var Qe=ce(Ye);n(94);class $e extends r.a.Component{constructor(e){super(e),this.handleDragPiece=this.handleDragPiece.bind(this)}handleDragPiece(e){this.props.onClick&&this.props.onClick(this.props.id)}render(){const{id:e,rank:t,file:n,isSelected:a,isPotentialMove:s,isSpecialMove:o,isInCheck:c,contains:i,onClick:l}=this.props,u=!!i,d="".concat(n).concat(t).concat(u?", ".concat(i.colour," ").concat(i.name):""),p=B()("square",{selected:a,"potential-move":s&&!i,"potential-take":s&&i,"special-move":o,"in-check":c,"is-over":this.props.isOver,"can-drop":this.props.canDrop,["rank-".concat(t)]:!0,["file-".concat(n)]:!0});return r.a.createElement("button",{id:e,className:p,"aria-label":d,onClick:()=>l(e)},u&&r.a.createElement(Qe,Object.assign({},i,{onDrag:this.handleDragPiece})))}}var Xe=oe($e);n(95);const Ze=[ie.a.pieces.rook,ie.a.pieces.knight,ie.a.pieces.bishop,ie.a.pieces.queen];var et=Object(c.c)(e=>({promotionAt:e.board.promotionAt}),e=>({actions:Object(U.b)({performSpecialMove:E.performSpecialMove},e)}))(({promotionAt:e,actions:t})=>{if(!e)return null;const n=Object(W.a)({},e,{type:ie.a.specialMoves.promotion});return r.a.createElement("div",{id:"promotion-options-container"},r.a.createElement("div",null,"Please select a piece to promote to: "),r.a.createElement("ul",{className:"list column"},Ze.map(e=>r.a.createElement("li",{key:e,id:"promote-to-".concat(e)},r.a.createElement("button",{type:"button",className:"button",onClick:()=>t.performSpecialMove(Object(W.a)({},n,{promoteTo:e}))},e)))))});n(96);var tt=function(){return r.a.createElement("div",{className:"thinking"},"Thinking...")},nt=n(8);n(97);class at extends r.a.Component{constructor(e){super(e),this.handleSquareSelection=this.handleSquareSelection.bind(this),this.handleCanDrop=this.handleCanDrop.bind(this),this.handleDrop=this.handleDrop.bind(this)}handleSquareSelection(e){const{squares:t,potentialMoves:n,specialMoves:a,selectedSquareId:r,actions:s}=this.props,o=t.find(e=>e.id===r),c=t.find(t=>t.id===e),i=r===e,l=this.props.currentPlayerColour,u=n.some(t=>t===e),d=a.find(t=>t.squareId===e),p=!!d;if(o||c.contains){if(o&&!c.contains)return p?s.performSpecialMove(d):u?s.moveSelectedPiece(e):console.log("%c invalid move","color: red; font-size: 22px;",o,c);if(o||c.contains.colour===l)return o||c.contains.colour!==l?o&&i?s.selectBoardSquare(null):o&&c.contains.colour===l?s.selectBoardSquare(e):o&&c.contains.colour!==l?p?s.performSpecialMove(d):u?s.takePiece(e):console.log("%c invalid take","color: red; font-size: 22px;",o,c):void console.log("%c square selection case not handled!","color: red","Selected square: ".concat(r,", Target square: ").concat(e)):s.selectBoardSquare(e)}}handleCanDrop(e){const{potentialMoves:t,specialMoves:n}=this.props,a=t.some(t=>t===e),r=n.find(t=>t.squareId===e);return a||!!r}handleDrop(e){this.handleSquareSelection(e)}render(){const{style:e,themeClass:t,squares:n,selectedSquareId:a,currentPlayerColour:s,potentialMoves:o,specialMoves:c,checkStatus:i,isReversed:l,isReadOnly:u,nextMove:d,vsComputer:p}=this.props,m=s===y.a.Strings.colours.black,h=p.isComputer&&p.isComputerBlack===m,g=l?Object(Je.k)(n):n,b=l?Object(Je.k)(y.a.files):y.a.files,v=l?Object(Je.k)(y.a.ranks):y.a.ranks,k=!!i.attackers.length&&i.kingSquare.id,E=!!k,O=u||i.isCheckmate,C=O?()=>null:this.handleSquareSelection,S={canDrop:this.handleCanDrop,onDrop:this.handleDrop};return console.groupCollapsed("BOARD RENDER"),console.log("selectedSquareId",a),console.log("boardSquares",g),console.log("props",this.props),console.log("isLocked",O),console.groupEnd(),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:e,className:B()("chess-board",t,{"read-only":O})},r.a.createElement(F,{files:b,ranks:v}),g.map(e=>{let t=o.some(t=>t===e.id);t=t&&(!u||u&&d.to.id===e.id);let n=c.some(t=>t.squareId===e.id);return n=n&&(!u||u&&d.to.id===e.id),r.a.createElement(Xe,Object.assign({key:e.id},e,{isPotentialMove:t,isSpecialMove:n,isInCheck:e.id===k,isSelected:e.id===a,onClick:C,dropActions:S}))})),r.a.createElement(f,{targetSelector:"#chess-game-status"},!i.isCheckmate&&r.a.createElement(r.a.Fragment,null,r.a.createElement(et,null),"".concat(Object(Je.a)(s),"'s turn"),h&&r.a.createElement(tt,null),E&&"\n".concat(Object(Je.a)(s)," is in Check!")),i.isCheckmate&&"Winner: ".concat(Object(nt.b)(i.kingSquare))))}}var rt=at,st=n(19),ot=n(29),ct=n(40),it=n(12),lt=n(5);function ut(e,t,n){const a=Object(W.a)({},e,{selectedSquareId:n,squares:t});return{possibleMoves:Object(st.d)(a),possibleSMoves:Object(ot.a)(a)}}var dt=new Map([[ie.b.pawn,10],[ie.b.rook,50],[ie.b.knight,30],[ie.b.bishop,30],[ie.b.queen,90],[ie.b.king,0]]);const{pieces:pt}=ie.a;function mt(e,t=null){var n;const a=null!==(n=e.contains)&&void 0!==n?n:t;return dt.get(a.name)}function ht(e,t,{attackedBy:n,defendedBy:a,contains:r}){let s=n.length,o=a.length;if(0===s)return void(e.pieceSecurity+=o);if(s>0&&0===o){if(r.colour===t)return;return void(e.pieceDanger-=dt.get(r.name))}let c=n.map(e=>function(e,t){const n=e.contains;if(n.colour===t)return mt(e);if(0===e.attackedBy.length)return mt(e);if(0!==e.defendedBy.length){const t=function(e,t,n){let a=t.length;const r=e.length;return e.forEach((e,s)=>{if(a>0){if((n-=e)>0)return n;s<=r&&(n+=t.shift())}}),n}(e.attackedBy.map(mt).sort((e,t)=>e-t),e.defendedBy.map(mt).sort((e,t)=>e-t),dt.get(n.name));return t>0?void 0:mt(e)}}(e,t)).filter(e=>void 0!==e).sort((e,t)=>e-t),i=a.map(mt).filter(e=>void 0!==e).sort((e,t)=>t-e),l=dt.get(r.name);c.forEach((t,a)=>{o>0?(l-=t,o--,l>0?(e.pieceDanger-=l,n.forEach(t=>{let n=t.contains,a=t.possibleMoves;if(a.length>1){let t=a.map(e=>mt(e,n));t=t.map(e=>e||Math.min(...t.filter(e=>e))),t.sort((e,t)=>e-t),e.pieceDanger-=1.5*t[0]}})):a<=s&&(l+=i[o])):l-t>=0&&(e.pieceDanger-=l)}),l<0&&(e.pieceSecurity+=1)}var ft=n(38);const{pieces:gt}=ie.a;function bt(e,t,n,a){const r=e.rank-1;return 0===r||7===r?450:[r+(t.colour===ie.a.colours.white?1:-1),n+a].reduce((e,t)=>e+t)}function vt(e,t,n,a){let{possibleMoves:r,contains:s}=a,o=Object(V.a)(a,["possibleMoves","contains"]),c=[0,1,3,6,6,3,1,0],i=[0,1,3,6,6,3,1,0];s.name===gt.pawn&&(t.length>50&&n<8&&(c=s.colour===ie.a.colours.white?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]),e.squareControl+=function(e,t){const n=ft.files.findIndex(t=>t===e.file);return n>1?bt(e,t,n,1):n<7?bt(e,t,n,-1):void 0}(o,s));const l=r.length;let u=r.reduce((e,t)=>e+c[t.rank-1]+i[ft.files.findIndex(e=>e===t.file)],0);l>10&&(u/=1.5),e.squareControl+=u}const{pieces:kt}=ie.a,Et={gameDevelopment:0,pieceDanger:0,pieceSecurity:0,pieceValue:0,squareControl:0};function yt(e,t,n){const a=Object(W.a)({},Et),r=n.length;return n.forEach(n=>{const s=n.contains;s.name!==kt.king&&(!function(e,t){e.pieceValue+=dt.get(t.name)}(a,s),ht(a,e,n),vt(a,t,r,n)),function(e,t,{rank:n,contains:a}){if(a.name!==pt.king){if(a.hasMoved)if(a.name===pt.pawn)e.gameDevelopment+=1;else if(a.name===pt.rook||a.name===pt.queen){if(t.length>7){const t=a.colour===ie.a.colours.white;(1===n!==t||8===n!==!t)&&(e.gameDevelopment+=1)}}else e.gameDevelopment+=2}else a.hasMoved&&(a.hasCastled?e.gameDevelopment+=4:t.length<30?e.gameDevelopment-=5:e.gameDevelopment+=1)}(a,t,n)}),a}function Ot(e){return 1.25*e.pieceValue+e.pieceDanger+e.squareControl/20+e.pieceSecurity/10+e.gameDevelopment/5}function Ct(e,t){const{moves:n,squares:a}=t,r=e===ie.a.colours.white,s=a.slice(0).filter(e=>e.contains);s.forEach(e=>{const{id:t,colour:r}=e.contains,o=Object(st.d)({selectedSquareId:e.id,squares:a}).map(e=>a.find(t=>t.id===e)),c=Object(ot.a)({selectedSquareId:e.id,moves:n,squares:a}).map(({squareId:e})=>a.find(t=>t.id===e));e.possibleMoves=[...o,...c],e.attackedBy=s.filter(n=>n.contains.id!==t&&n.contains.colour!==r&&Object(nt.e)(n,e,a)),e.defendedBy=s.filter(n=>n.contains.id!==t&&n.contains.colour===r&&Object(nt.c)(n,e,a))});const o=s.filter(e=>e.contains.colour===ie.a.colours.white),c=s.filter(e=>e.contains.colour===ie.a.colours.black),i=yt(e,n,o),l=yt(e,n,c),u=Ot(i),d=Ot(l);return r?u-d:d-u}function St(e){const{moves:t,squares:n}=e,a=Object(nt.a)(t);return n.filter(e=>e.contains&&e.contains.colour===a).reduce((t,r)=>{const s=r.id,{possibleMoves:o,possibleSMoves:c}=ut(e,n,s);return[...t,...o.map(t=>{const n=Object(it.a)(e,s,t);return{currentColour:a,type:"STANDARD",squareId:s,targetId:t,board:n,score:Ct(a,n)}}),...c.map(t=>{const n=function(e,t,n){const{type:a,squareId:r}=n,s=Object(it.a)(e,t,r,n);switch(a){case ie.a.specialMoves.promotionSelection:{const e=s.squares.findIndex(e=>e.id===r),t=Object(lt.b)(s.squares,e,{name:ie.a.pieces.queen});return Object(W.a)({},s,{squares:t,promotionAt:null})}case ie.a.specialMoves.enPassant:return Object(it.c)(s,r);case ie.a.specialMoves.castling:{const e=Object(it.b)(s.squares,r);return Object(W.a)({},s,{squares:e})}default:throw new Error("Unknown special move")}}(e,s,t),r=t.type===ie.a.specialMoves.promotionSelection?ie.a.specialMoves.promotion:t.type;return{currentColour:a,type:r,squareId:s,targetId:t.squareId,board:n,score:Ct(a,n)}})]},[])}function wt(e,t){const n=e.sort((e,n)=>t?n.score-e.score:e.score-n.score);return console.groupCollapsed("futures",e.length),console.log("maxing ? ",t),console.log("min > ",Math.min(...e.map(e=>e.score))),console.log("max > ",Math.max(...e.map(e=>e.score))),console.log("futures > ",n),console.groupEnd(),n.slice(0,6).reduce((e,t)=>[...e,...St(t.board).map(e=>Object(W.a)({},t,{currentColour:e.currentColour,board:e.board,score:e.score}))],[])}var Mt={selectNextMove:function(e){const t=performance.now(),n=function(e){const t=St(e);var n;return(n=4,e=>(t,a)=>{let r=n,s=a;for(;;){if(0===r)return t;r-=1,t=e(t,s),s=!s}})(wt)(t,!0).reduce((e,t)=>{const n="".concat(t.squareId,"-").concat(t.targetId);return e.set(n,t)},new Map([]))}(e),a=Object(Je.e)(n);a||console.log("%c STALEMATE","color: orange; font-size: 16px;");const r=n.get(a),s={moveType:r.type,fromId:r.squareId,toId:r.targetId};console.groupCollapsed("%c engine done","color: forestgreen"),console.log("input > ",e),console.log("moves for pieces > ",n),console.log("bestOutcome >> ",a),console.log("output > ",s),console.groupEnd();const o=performance.now();return console.log("Engine took ".concat(o-t," milliseconds to find best move: "),n.get(a),s),s}};class jt extends r.a.Component{constructor(e){super(e),this.state={computerSelected:null},this.timer=null,this.makeComputerMove=this.makeComputerMove.bind(this)}componentDidUpdate(){const{vsComputer:e,moves:t}=this.props.board,{isComputer:n,isComputerBlack:a}=e,r=Object(nt.f)(t.length);n&&!(a&&r||!a&&!r)&&(clearTimeout(this.timer),this.timer=setTimeout(()=>requestAnimationFrame(this.makeComputerMove),50))}makeComputerMove(){const{moves:e,squares:t}=this.props.board,n=Object(nt.a)(e),a=Object(st.b)(n,t);if(a&&a.isCheckmate)return;const r=Mt.selectNextMove(this.props.board);r&&this.props.actions.performComputerMove(r)}render(){const e=this.props,{board:t}=e,n=Object(V.a)(e,["board"]),a=t.playback.sliderPosition,s=a!==t.moves.length,o=t.moves.slice(0,a),[c]=t.moves.slice(a,a+1),i=s?Object(ct.c)(t.moves,a):t.selectedSquareId,l=s?Object(ct.a)(o):t.squares,u=Object(W.a)({},t,{selectedSquareId:i,moves:o,squares:l}),d=Object(nt.a)(o),p=Object(st.d)(u),m=Object(ot.a)(u),h=Object(st.b)(d,l),f=t.reverseBoard&&!Object(nt.f)(o.length);return r.a.createElement(rt,Object.assign({},n,u,{currentPlayerColour:d,nextMove:c,potentialMoves:p,specialMoves:m,checkStatus:h,isReversed:f,isReadOnly:s}))}}var xt=Object(c.c)(e=>({themeClass:e.theme.board,board:e.board}),e=>({actions:Object(U.b)(E,e)}))(function(e){const t=se();class n extends r.a.Component{render(){return r.a.createElement(K.a,{backend:t,context:window},r.a.createElement(e,this.props))}}return n}(jt));n(98);var Lt=({pieces:e})=>r.a.createElement("div",{className:"graveyard"},e.map((e,t)=>r.a.createElement(Ye,Object.assign({key:t},e))));const At=e=>{const t=e.board.playback.sliderPosition;return e.board.moves.slice(0,t)},Dt=(e,t)=>{const n=At(e);return e.board.graveyard.filter(e=>e.colour===t&&n.some(t=>t.captured&&t.captured.id===e.id))},qt=e=>{const t=At(e);return e.board.reverseBoard&&!Object(nt.f)(t.length)};var It=Object(c.c)(e=>({isReversed:qt(e),whitePieces:Dt(e,y.a.Strings.colours.white),blackPieces:Dt(e,y.a.Strings.colours.black)}))(({isReversed:e,whitePieces:t,blackPieces:n})=>r.a.createElement("div",{id:"paired-graveyards"},r.a.createElement(Lt,{pieces:e?n:t}),r.a.createElement(Lt,{pieces:e?t:n})));n(99);const Bt=({pgn:e,isActive:t,onClick:n})=>r.a.createElement("li",{className:B()({active:t})},r.a.createElement("button",{type:"button",className:"button",disabled:t,onClick:n},e));var Tt=e=>{let{moves:t,activeMoveIndex:n}=e,a=Object(V.a)(e,["moves","activeMoveIndex"]);return r.a.createElement("div",{id:"move-list"},r.a.createElement("ul",{className:"list column two"},r.a.createElement("li",{key:"WHITE",className:"title"},ie.a.colours.white),r.a.createElement("li",{key:"BLACK",className:"title"},ie.a.colours.black),t.map((e,t)=>{const s=a.onSelect?()=>a.onSelect("PLACEHOLDER NAME",t):()=>null;return r.a.createElement(Bt,Object.assign({key:e.id,isActive:t===n,onClick:s},e))})))},Pt=n(20),Nt=n(33);const Rt={onSelect:Pt.f};var _t=Object(c.c)(e=>({moves:Object(Nt.a)(e.board.moves),activeMoveIndex:e.board.playback.sliderPosition}),Rt)(Tt),Gt="\u25b6",zt="\u2223\u2223",Ut="\u2039",Wt="\u203a",Vt=n(35);n(100);const Ht=e=>{let{className:t}=e,n=Object(V.a)(e,["className"]);return r.a.createElement("button",Object.assign({type:"button",className:B()("button-icon ripple playback-button",t)},n))};class Ft extends r.a.Component{constructor(e){super(e),this.state={isPlaying:!1},this.timer=null,this.previousPosition=null,this.handleTogglePlay=this.handleTogglePlay.bind(this),this.createSliderStepHandler=this.createSliderStepHandler.bind(this),this.handleSliderChange=this.handleSliderChange.bind(this)}handleTogglePlay(){this.setState(e=>({isPlaying:!e.isPlaying}),()=>{clearInterval(this.timer),this.state.isPlaying&&(this.props.sliderPosition===this.props.sliderMaximum&&this.props.actions.onSlide(this.props.name,Vt.a),this.timer=setInterval(()=>{if(this.previousPosition===this.props.sliderMaximum)return this.stopPlaying();this.previousPosition=this.props.sliderPosition,this.props.actions.onStepForward(this.props.name,1)},this.props.playbackInterval))})}stopPlaying(){clearInterval(this.timer),this.previousPosition=null,this.setState({isPlaying:!1})}createSliderStepHandler(e){const t=1===e?this.props.actions.onStepForward:this.props.actions.onStepBack;return()=>t(this.props.name,e)}handleSliderChange(e){const{name:t,value:n}=e.target;this.props.actions.onSlide(t,Number(n))}render(){const{isPlaying:e}=this.state,{name:t,isDisabled:n,isHidden:a,sliderPosition:s,sliderMaximum:o}=this.props;if(a)return null;const c=s===Vt.a,i=s===o,l=s/o*100,u=e?{icon:zt,"aria-label":"Pause playback"}:{icon:Gt,"aria-label":"Start playback"},d={backgroundImage:"linear-gradient(90deg, currentcolor, currentcolor ".concat(l,"%, #ddd ").concat(l,"%)")};return r.a.createElement("div",{id:"playback-control"},r.a.createElement("div",{className:"button-group"},r.a.createElement(Ht,Object.assign({className:"playback-toggle-play"},u,{onClick:this.handleTogglePlay,disabled:n}))),r.a.createElement("div",{id:"playback-progress-container",className:"range-slider"},r.a.createElement("input",{type:"range",name:t,"aria-label":"playback slider",style:d,value:s,max:o,disabled:n,onChange:this.handleSliderChange})),r.a.createElement("div",{className:"button-group"},r.a.createElement(Ht,{className:"playback-back","aria-label":"Move playback backward a step",icon:Ut,onClick:this.createSliderStepHandler(-1),disabled:c||n}),r.a.createElement(Ht,{className:"playback-forward","aria-label":"Move playback forward a step",icon:Wt,onClick:this.createSliderStepHandler(1),disabled:i||n})))}}Ft.defaultProps={name:"slider",sliderMaximum:100,playbackInterval:1e3,isDisabled:!1,isHidden:!1};var Kt=Ft;var Jt=Object(c.c)(e=>Object(W.a)({},e.board.playback,{isDisabled:e.board.moves.length<2}),e=>({actions:Object(U.b)({onSlide:Pt.f,onStepForward:Pt.e,onStepBack:Pt.d},e)}))(Kt);const Yt={header:50,actions:45,status:52,playback:62};class Qt extends r.a.Component{constructor(e){super(e),this.state={width:"525px",height:"525px"},this.wrappedComponent=r.a.createRef(),this.onResize=this.onResize.bind(this)}componentDidMount(){window.addEventListener("resize",this.onResize),this.onResize()}componentWillUnmount(){clearTimeout(this.timer),window.removeEventListener("resize",this.onResize)}onResize(e){clearTimeout(this.timer),this.timer=setTimeout(()=>{const e=this.wrappedComponent.current,t=Math.min(e.clientHeight,e.clientWidth),n=Object.keys(Yt).reduce((e,t)=>e-Yt[t],t);this.setState({width:"".concat(n,"px"),height:"".concat(n,"px")})},200)}render(){return this.props.children(this.wrappedComponent,this.state)}}var $t=e=>{let{children:t}=e,n=Object(V.a)(e,["children"]);return r.a.createElement("button",Object.assign({type:"button",className:"button ripple primary"},n),t)},Xt=n(32);n(101);var Zt=({display:e,targetSelector:t,onSelect:n})=>e?(console.log(Xt.b,Xt.a),r.a.createElement(f,{targetSelector:t},r.a.createElement("div",{className:"game-options"},r.a.createElement("p",null,"Select game type"),r.a.createElement("ul",{className:"list column one"},Xt.b.map(e=>r.a.createElement("li",{key:e.id},r.a.createElement($t,{onClick:()=>n(e.id)},e.text))))))):null,en=n(43);class tn extends r.a.Component{constructor(e){super(e),this.state={isStartingNewGame:!1},this.fileSelector=r.a.createRef(),this.handleImport=this.handleImport.bind(this),this.handleNewGame=this.handleNewGame.bind(this)}componentDidMount(){this.props.actions.loadGame()}async handleImport(e){const t=e.target.files&&e.target.files[0];if(!t)return;const n=await new Response(t).text();this.props.actions.importGame(n)}handleNewGame(e){this.state.isStartingNewGame?this.setState({isStartingNewGame:!1},()=>this.props.actions.resetBoard(e)):this.setState({isStartingNewGame:!0})}render(){const{moves:e,vsComputer:t,actions:n}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_t,null),r.a.createElement("div",{id:"chess-game-actions",className:"button-group right"},r.a.createElement($t,{id:"new-game",onClick:this.handleNewGame},"New Game"),r.a.createElement($t,{id:"save-game",onClick:n.saveGame},"Save Game"),r.a.createElement($t,{id:"export-game",onClick:()=>Object(en.a)(e,t)},"Export"),r.a.createElement("label",{id:"import-game",role:"button",className:"button ripple primary"},"Import",r.a.createElement("input",{ref:this.fileSelector,type:"file",accept:".pgn",onChange:this.handleImport}))),r.a.createElement("div",{id:"chess-game",ref:this.getGameContainer},r.a.createElement(Qt,null,(e,t)=>r.a.createElement("div",{ref:e,className:"left-column"},r.a.createElement("div",{id:"chess-game-status"}),r.a.createElement(xt,{style:t}),r.a.createElement(Jt,null))),r.a.createElement("div",{className:"right-column"},r.a.createElement(It,null))),r.a.createElement(Zt,{targetSelector:"#".concat("chess-game-actions"),display:this.state.isStartingNewGame,onSelect:this.handleNewGame}))}}var nn=Object(c.c)(e=>({moves:e.board.moves,vsComputer:e.board.vsComputer}),e=>({actions:Object(U.b)({resetBoard:E.resetBoard,importGame:E.importGame,saveGame:E.saveGame,loadGame:E.loadGame},e)}))(tn);const an=({match:e})=>r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:e.path,component:nn}));var rn=({history:e})=>r.a.createElement(p.a,{history:e},r.a.createElement(z,null,r.a.createElement(d.d,null,r.a.createElement(d.a,{exact:!0,from:"/",to:A.a.base}),r.a.createElement(d.b,{path:A.a.base,component:an}),r.a.createElement(d.b,{path:"*",render:()=>r.a.createElement("div",null,"Page not found")}))));const sn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function on(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}const cn=e=>((e=>document.getElementById(e))(e)||{click:()=>console.log("nothing to click")}).click(),ln=async(e,t)=>{await cn(e),await cn(t)},un=e=>{const t=e.pop();if(!t)return console.log("board ready");let n;clearTimeout(n),n=setTimeout(()=>{(e=>{ln(...e)})(t),un(e)},200)};let dn=[[53,37],[12,28],[54,38],[3,39]].reverse(),pn=[[53,45],[12,28],[45,37],[3,39]].reverse(),mn=[[53,37],[8,16],[54,38],[9,17],[61,47],[10,18],[62,45],[11,19],[60]].reverse(),hn=[[51,35],[8,16],[35,27],[12,28],[27]].reverse(),fn=[[54,38],[15,31],[38,31],[7,23],[53,45],[23,22],[31,23],[22,21],[23,15],[21,20],[15]].reverse(),gn=[[50,34],[11,27],[52,36],[8,16],[34,27]].reverse();var bn={selectSquare:cn,moveFromSquareToSquare:ln,makeMoves:un,movesFor:{fastestGame:dn,check:pn,castling:mn,enPassant:hn,promotion:fn},examples:{fastestGame:()=>un(dn),check:()=>un(pn),promotion:()=>un(fn),enPassant:()=>un(hn),castling:()=>un(mn),ambiguous:()=>un(gn)},actions:{newGame:()=>document.getElementById("new-game").click(),saveGame:()=>document.getElementById("save-game").click(),export:()=>document.getElementById("export-game").click(),import:()=>document.getElementById("import-game").click()},playback:{togglePlay:()=>document.querySelector(".playback-button.playback-toggle-play").click(),forward:()=>document.querySelector(".playback-button.playback-forward").click(),back:()=>document.querySelector(".playback-button.playback-back").click()}};n(102);window.Engine=Mt,window.AutomateBoard=bn;const vn=Object(i.a)(),kn=u()(vn);o.a.render(r.a.createElement(c.a,{store:kn},r.a.createElement(rn,{history:vn})),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/satsuki-junketsu",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/satsuki-junketsu","/service-worker.js");sn?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):on(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):on(e)})}}()},function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(59),s=n(36),o=n(2),c=n(34),i=n(4),l=n(7);function u(e,t){return function(n=e,a){return t.hasOwnProperty(a.type)?t[a.type](n,a):n}}const d=e=>(t,n)=>Object(l.j)({theme:Object(o.a)({},t,{[e]:n.theme})}).theme;var p=u((()=>{const e=Object(l.g)();return e&&e.theme?e.theme:{app:i.a.themes[0].class,board:i.a.boardThemes[0].class}})(),{[c.a]:d("app"),[c.b]:d("board")}),m=n(27),h=n(12);var f=n(39),g=n(9),b=n(20),v=n(1),k=n(5);var E=function(e,t){const{type:n,squareId:a}=t.specialMove;if(n===v.a.specialMoves.promotionSelection)return Object(o.a)({},e,{promotionAt:t.specialMove});const r=Object(h.a)(e,e.selectedSquareId,t.specialMove.squareId,t.specialMove);switch(n){case v.a.specialMoves.promotion:{const e=r.squares.findIndex(e=>e.id===a),n=Object(k.b)(r.squares,e,{name:t.specialMove.promoteTo});return Object(o.a)({},r,{squares:n,promotionAt:null})}case v.a.specialMoves.enPassant:return Object(h.c)(r,a);case v.a.specialMoves.castling:{const e=Object(h.b)(r.squares,a);return Object(o.a)({},r,{squares:e})}default:return e}},y=n(40);const O=e=>({sliderMaximum:e,sliderPosition:e});function C(e,t){const n=Object(y.b)(e.playback.sliderPosition+t.stepDirection,e.playback.sliderMaximum);return Object(o.a)({},e,{playback:Object(o.a)({},e.playback,{sliderPosition:n})})}var S=function(e,t){switch(t.type){case b.c:{const n=t.sliderValue;return Object(o.a)({},e,{playback:Object(o.a)({},e.playback,{sliderPosition:n})})}case b.b:case b.a:return C(e,t);default:return Object(o.a)({},e,{playback:O(0)})}},w=n(8),M=n(43),j=n(33),x=n(29);var L=function(e,t){const{fileText:n}=t,a=Object(M.b)(n);return a.pgnMoves.map(j.b).reduce((e,t)=>{const n=e.squares.findIndex(e=>e.file===t.to.file&&e.rank===t.to.rank),r=Object(o.a)({},e.squares[n]),s=!!r&&!!r.contains,c=s?Object(o.a)({},r.contains):null,i=s?w.e:w.d,l=e.squares.find(n=>(!t.from||t.from&&n.file===t.from.file&&(!t.from.rank||n.rank===t.from.rank))&&n.contains&&n.contains.colour===t.piece.colour&&n.contains.name===t.piece.name&&(i(n,r,e.squares)||function(e,t,n){return!!t.specialMove&&Object(x.a)(Object(o.a)({},e,{selectedSquareId:n.id})).some(e=>e.type===t.specialMove.type)}(e,t,n))),u=Object(k.a)(l.contains);let d=Object(k.c)(e.squares,n,Object(o.a)({},l,{contains:u}));const p=t.specialMove?Object(o.a)({},t.specialMove,{squareId:r.id}):null,m=t.specialMove&&t.specialMove.type===v.a.specialMoves.castling,f=t.specialMove&&t.specialMove.type===v.a.specialMoves.enPassant;d=m?Object(h.b)(d,r.id):d;const g=Object(o.a)({},e,{squares:d,graveyard:[...e.graveyard,c].filter(e=>!!e),moves:[...e.moves,Object(k.g)(l,d[n],d,c,p)],vsComputer:a.vsComputer});return f?Object(h.c)(g,r.id):g},e)},A=n(32);const D={reverseBoard:!1,graveyard:[],moves:[],squares:Object(m.a)(),selectedSquareId:null,promotionAt:null,playback:O(0),vsComputer:{isComputer:!0,isComputerBlack:!0}},q=(e,t)=>Object(o.a)({},e,{selectedSquareId:t.squareId}),I=e=>Object(o.a)({},e,{playback:O(e.moves.length)}),B=Object(l.b)(I,(e,t)=>Object(h.a)(e,e.selectedSquareId,t.targetSquareId)),T=Object(l.b)(I,E),P=Object(l.b)(I,(N=D,(e,t)=>L(N,t)));var N;var R=u(D,{[g.BOARD_SELECT_SQUARE]:q,[g.BOARD_MOVE_PIECE]:B,[g.BOARD_TAKE_PIECE]:B,[g.BOARD_SPECIAL_MOVE]:T,[b.c]:S,[b.b]:S,[b.a]:S,[g.BOARD_IMPORT_GAME]:P,[g.BOARD_RESET]:(e,t)=>{const{option:n}=t;return n===A.a.vsComputerYouBlack?Object(o.a)({},D,{vsComputer:Object(o.a)({},D.vsComputer,{isComputerBlack:!1})}):n===A.a.vsPlayer?Object(o.a)({},D,{vsComputer:Object(o.a)({},D.vsComputer,{isComputer:!1})}):D},[g.BOARD_SAVE_GAME]:e=>{const t=Object(l.i)(e);return f.a.success("Saved Game"),t},[g.BOARD_LOAD_GAME]:e=>{const t=Object(l.f)();return t?(f.a.success("Loaded Game"),function(e){let t=Object(o.a)({},e);return e.hasOwnProperty("vsComputer")||(t=Object(o.a)({},t,{vsComputer:{isComputer:!1,isComputerBlack:!0}})),t}(t)):e},[g.BOARD_TOGGLE_REVERSE]:e=>Object(o.a)({},e,{reverseBoard:!e.reverseBoard}),[g.BOARD_COMPUTER_MOVE]:(e,t)=>{const{moveType:n,fromId:a,toId:r}=t.move,s=q(e,{squareId:a});return"STANDARD"===n?B(s,{targetSquareId:r}):T(s,{specialMove:{type:n,squareId:r,promoteTo:v.a.pieces.queen}})}});var _=e=>Object(a.c)({router:Object(s.b)(e),theme:p,board:R});t.default=(e,t)=>Object(a.d)(_(e),t,Object(a.a)(Object(r.a)(e)))}],[[67,1,2]]]);
//# sourceMappingURL=main.07674a14.chunk.js.map